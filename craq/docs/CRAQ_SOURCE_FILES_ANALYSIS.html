<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAQ æºä»£ç æ–‡ä»¶å®Œæ•´è§£è¯»</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            color: #e0e0e0;
            line-height: 1.8;
            padding: 40px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2.8em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: linear-gradient(135deg, #1e3a5f 0%, #16213e 100%);
            padding: 20px 40px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #30363d;
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            color: #888;
            font-size: 0.9em;
        }
        
        h2 {
            color: #00d4ff;
            font-size: 1.8em;
            margin: 50px 0 25px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #00d4ff33;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        h2 .icon {
            font-size: 1.2em;
        }
        
        .category-desc {
            color: #888;
            margin-bottom: 25px;
            font-size: 1.05em;
        }
        
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .file-card {
            background: linear-gradient(135deg, #0d1117 0%, #161b22 100%);
            border-radius: 12px;
            border: 1px solid #30363d;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .file-card:hover {
            border-color: #00d4ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 212, 255, 0.15);
        }
        
        .file-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #30363d;
        }
        
        .file-name {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 1.05em;
            color: #58a6ff;
            font-weight: 600;
        }
        
        .file-meta {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
        }
        
        .file-lines {
            color: #7ee787;
            background: #238636aa;
            padding: 3px 10px;
            border-radius: 12px;
        }
        
        .file-size {
            color: #ffa657;
            background: #9e6a03aa;
            padding: 3px 10px;
            border-radius: 12px;
        }
        
        .file-body {
            padding: 20px;
        }
        
        .file-desc {
            color: #c9d1d9;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .file-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tag {
            font-size: 0.8em;
            padding: 4px 12px;
            border-radius: 15px;
            background: #30363d;
            color: #8b949e;
        }
        
        .tag.behaviour {
            background: #7c3aed33;
            color: #a78bfa;
            border: 1px solid #7c3aed55;
        }
        
        .tag.api {
            background: #10b98133;
            color: #34d399;
            border: 1px solid #10b98155;
        }
        
        .tag.server {
            background: #f59e0b33;
            color: #fbbf24;
            border: 1px solid #f59e0b55;
        }
        
        .tag.core {
            background: #ef444433;
            color: #f87171;
            border: 1px solid #ef444455;
        }
        
        .tag.util {
            background: #06b6d433;
            color: #22d3ee;
            border: 1px solid #06b6d455;
        }
        
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: #0d1117;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .summary-table th {
            background: linear-gradient(90deg, #238636, #1f6feb);
            color: white;
            padding: 15px 20px;
            text-align: left;
            font-weight: 600;
        }
        
        .summary-table td {
            padding: 12px 20px;
            border-bottom: 1px solid #30363d;
        }
        
        .summary-table tr:hover {
            background: #161b22;
        }
        
        .summary-table .file-name-col {
            font-family: 'Monaco', 'Consolas', monospace;
            color: #58a6ff;
        }
        
        .summary-table .lines-col {
            color: #7ee787;
            text-align: center;
        }
        
        .summary-table .size-col {
            color: #ffa657;
            text-align: center;
        }
        
        .architecture-diagram {
            background: #0d1117;
            border-radius: 12px;
            padding: 40px;
            margin: 30px 0;
            border: 1px solid #30363d;
        }
        
        .arch-layer {
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            border: 2px dashed #30363d;
        }
        
        .arch-layer-title {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .arch-modules {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .arch-module {
            background: linear-gradient(135deg, #1e3a5f, #16213e);
            border: 1px solid #30363d;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            color: #58a6ff;
        }
        
        .arch-module.highlight {
            border-color: #fbbf24;
            background: linear-gradient(135deg, #5f3a1e, #442a17);
            color: #fbbf24;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .legend-color.behaviour { background: #7c3aed; }
        .legend-color.api { background: #10b981; }
        .legend-color.server { background: #f59e0b; }
        .legend-color.core { background: #ef4444; }
        .legend-color.util { background: #06b6d4; }
        
        .toc {
            background: #0d1117;
            border-radius: 12px;
            padding: 25px 30px;
            margin: 30px 0;
            border: 1px solid #30363d;
        }
        
        .toc-title {
            color: #00d4ff;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        
        .toc-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }
        
        .toc-item {
            color: #58a6ff;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .toc-item:hover {
            background: #30363d;
        }
    </style>
</head>
<body>
<!-- CRAQ æ–‡æ¡£å¯¼èˆªæ  -->
<div id="craq-nav" style="
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(15, 15, 35, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 12px 20px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
">
    <a href="/craq/" style="
        color: #00d4ff;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#7c3aed'" onmouseout="this.style.color='#00d4ff'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        è¿”å› CRAQ æ–‡æ¡£é¦–é¡µ
    </a>
    
    <div style="flex: 1;"></div>
    
    <a href="/" style="
        color: #888;
        text-decoration: none;
        font-size: 14px;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#fff'" onmouseout="this.style.color='#888'">
        åšå®¢é¦–é¡µ
    </a>
</div>

<!-- ä¸ºå¯¼èˆªæ æ·»åŠ é¡¶éƒ¨é—´è· -->
<div style="height: 60px;"></div>

    <div class="container">
        <h1>ğŸ“š CRAQ æºä»£ç æ–‡ä»¶å®Œæ•´è§£è¯»</h1>
        <p class="subtitle">Erlang CRAQ åˆ†å¸ƒå¼å¤åˆ¶ç³»ç»Ÿ - 36ä¸ªæ ¸å¿ƒæ¨¡å—è¯¦ç»†åˆ†æ</p>

        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number">36</div>
                <div class="stat-label">Erlang æ¨¡å—</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">~2,800</div>
                <div class="stat-label">æ€»ä»£ç è¡Œæ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">8</div>
                <div class="stat-label">Behaviour å®šä¹‰</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">8</div>
                <div class="stat-label">API å®ç°</div>
            </div>
        </div>

        <!-- å›¾ä¾‹ -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color behaviour"></div>
                <span>Behaviour (è¡Œä¸ºå®šä¹‰)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color api"></div>
                <span>API (é»˜è®¤å®ç°)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color server"></div>
                <span>Server (gen_server)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color core"></div>
                <span>Core (æ ¸å¿ƒé€»è¾‘)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color util"></div>
                <span>Util (å·¥å…·å‡½æ•°)</span>
            </div>
        </div>

        <!-- ========== åº”ç”¨å…¥å£å±‚ ========== -->
        <h2><span class="icon">ğŸš€</span> ä¸€ã€åº”ç”¨å…¥å£å±‚ (Application Layer)</h2>
        <p class="category-desc">OTP åº”ç”¨å¯åŠ¨å…¥å£å’Œå®¢æˆ·ç«¯ API æ¥å£</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">erlang_craq.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">139 è¡Œ</span>
                        <span class="file-size">4.66 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å®¢æˆ·ç«¯ API å…¥å£æ¨¡å—</strong>ã€‚æä¾›æ‰€æœ‰å¯¹å¤–æ¥å£ï¼š
                        <code>start/stop</code> åº”ç”¨æ§åˆ¶ã€<code>setup_repl</code> é›†ç¾¤åˆå§‹åŒ–ã€
                        <code>query/update/delete</code> æ•°æ®æ“ä½œã€<code>multi_update</code> æ‰¹é‡æ›´æ–°ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒå…¥å£</span>
                        <span class="tag">å®¢æˆ·ç«¯API</span>
                        <span class="tag">æ¶ˆæ¯å‘é€</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_app.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">44 è¡Œ</span>
                        <span class="file-size">1.37 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>OTP Application è¡Œä¸ºå®ç°</strong>ã€‚å®ç° <code>application</code> å›è°ƒï¼Œ
                        å¯åŠ¨é¡¶å±‚ç›‘ç£æ ‘ <code>eh_sup</code>ï¼Œåˆå§‹åŒ–äº‹ä»¶å¤„ç†å™¨ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">application</span>
                        <span class="tag">OTP</span>
                        <span class="tag">å¯åŠ¨å…¥å£</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_config.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">29 è¡Œ</span>
                        <span class="file-size">1.02 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é…ç½®è¯»å–å·¥å…·</strong>ã€‚å°è£… <code>application:get_env/3</code>ï¼Œ
                        æä¾›å¸¦é»˜è®¤å€¼çš„é…ç½®è¯»å–åŠŸèƒ½ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">é…ç½®</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_system_config.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">170 è¡Œ</span>
                        <span class="file-size">7.77 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ç³»ç»Ÿé…ç½®ç®¡ç†å™¨</strong>ã€‚æ„å»º <code>#eh_app_config{}</code> è®°å½•ï¼Œ
                        æä¾› 18 ä¸ªé…ç½®é¡¹çš„ getter å‡½æ•°ï¼Œå®šä¹‰æ‰€æœ‰é»˜è®¤å€¼ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">é…ç½®ç®¡ç†</span>
                        <span class="tag">å¯æ’æ‹”ç»„ä»¶</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== ç›‘ç£æ ‘å±‚ ========== -->
        <h2><span class="icon">ğŸŒ³</span> äºŒã€ç›‘ç£æ ‘å±‚ (Supervision Layer)</h2>
        <p class="category-desc">OTP ç›‘ç£æ ‘ç»“æ„ï¼Œä¿è¯ç³»ç»Ÿå®¹é”™èƒ½åŠ›</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_sup.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">65 è¡Œ</span>
                        <span class="file-size">2.41 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é¡¶å±‚ç›‘ç£è€…</strong>ã€‚é‡‡ç”¨ <code>one_for_one</code> ç­–ç•¥ï¼Œ
                        ç®¡ç† <code>eh_system_sup</code> å’Œ <code>eh_event</code> ä¸¤ä¸ªå­è¿›ç¨‹ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">supervisor</span>
                        <span class="tag">é¡¶å±‚ç›‘ç£</span>
                        <span class="tag">one_for_one</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_system_sup.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">72 è¡Œ</span>
                        <span class="file-size">2.84 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ç³»ç»Ÿå­ç›‘ç£è€…</strong>ã€‚é‡‡ç”¨ <code>rest_for_one</code> ç­–ç•¥ï¼Œ
                        ç®¡ç† <code>eh_data_server</code> å’Œ <code>eh_system_server</code>ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">supervisor</span>
                        <span class="tag">rest_for_one</span>
                        <span class="tag">æ ¸å¿ƒæœåŠ¡</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== æ ¸å¿ƒæœåŠ¡å±‚ ========== -->
        <h2><span class="icon">âš™ï¸</span> ä¸‰ã€æ ¸å¿ƒæœåŠ¡å±‚ (Core Server Layer)</h2>
        <p class="category-desc">ç³»ç»Ÿæ ¸å¿ƒ gen_server è¿›ç¨‹ï¼Œå¤„ç†æ‰€æœ‰ä¸šåŠ¡é€»è¾‘</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_system_server.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">460 è¡Œ</span>
                        <span class="file-size">21.98 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ğŸ”¥ ç³»ç»Ÿæ ¸å¿ƒæœåŠ¡å™¨</strong>ã€‚å¤„ç†æ‰€æœ‰ CRAQ åè®®æ¶ˆæ¯ï¼š
                        é›†ç¾¤è®¾ç½® (<code>setup_repl</code>)ã€æ›´æ–°ä¼ æ’­ (<code>pred_pre_update/succ_update</code>)ã€
                        æŸ¥è¯¢å¤„ç†ã€æ•…éšœæ£€æµ‹å“åº”ã€‚æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç¥ç»ä¸­æ¢ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag server">gen_server</span>
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">CRAQåè®®</span>
                        <span class="tag">æ¶ˆæ¯å¤„ç†</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_data_server.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">164 è¡Œ</span>
                        <span class="file-size">6.13 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ•°æ®å­˜å‚¨æœåŠ¡å™¨</strong>ã€‚ç®¡ç†æœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œå¤„ç†ï¼š
                        æ•°æ®æ›´æ–°ã€æŸ¥è¯¢ã€å¿«ç…§ã€æ—¶é—´æˆ³ç®¡ç†ã€‚ç»´æŠ¤ <code>#eh_data_state{}</code> çŠ¶æ€ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag server">gen_server</span>
                        <span class="tag">æ•°æ®å­˜å‚¨</span>
                        <span class="tag">æŒä¹…åŒ–</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== å¯æ’æ‹”ç»„ä»¶å±‚ ========== -->
        <h2><span class="icon">ğŸ”Œ</span> å››ã€å¯æ’æ‹”ç»„ä»¶å±‚ (Pluggable Components)</h2>
        <p class="category-desc">åŸºäº Behaviour çš„å¯æ’æ‹”è®¾è®¡ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯æ›¿æ¢ä¸ºè‡ªå®šä¹‰å®ç°</p>

        <!-- æ•…éšœæ£€æµ‹ -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.1 æ•…éšœæ£€æµ‹å™¨ (Failure Detector)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_failure_detector.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">27 è¡Œ</span>
                        <span class="file-size">991 B</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ•…éšœæ£€æµ‹è¡Œä¸ºå®šä¹‰</strong>ã€‚å®šä¹‰ä¸‰ä¸ªå›è°ƒï¼š
                        <code>set/2</code> æ‰¹é‡ç›‘æ§ã€<code>set/1</code> å•èŠ‚ç‚¹ç›‘æ§ã€<code>detect/1</code> æ•…éšœæ£€æµ‹ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">æ¥å£å®šä¹‰</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_failure_detector_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">42 è¡Œ</span>
                        <span class="file-size">1.26 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é»˜è®¤æ•…éšœæ£€æµ‹å®ç°</strong>ã€‚åŸºäº Erlang <code>monitor/2</code> æœºåˆ¶ï¼Œ
                        ç›‘æ§è¿œç¨‹èŠ‚ç‚¹çš„ <code>eh_system_server</code> è¿›ç¨‹ï¼Œæ£€æµ‹ <code>DOWN</code> æ¶ˆæ¯ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">è¿›ç¨‹ç›‘æ§</span>
                        <span class="tag">monitor</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•°æ®ç®¡ç† -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.2 å¤åˆ¶æ•°æ®ç®¡ç†å™¨ (Replication Data Manager)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_repl_data_manager.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">39 è¡Œ</span>
                        <span class="file-size">1.26 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å¤åˆ¶æ•°æ®ç®¡ç†è¡Œä¸ºå®šä¹‰</strong>ã€‚å®šä¹‰ 8 ä¸ªå›è°ƒï¼š
                        <code>update</code>ã€<code>query</code>ã€<code>timestamp</code>ã€<code>snapshot</code> ç­‰ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">æ¥å£å®šä¹‰</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_repl_data_manager_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">65 è¡Œ</span>
                        <span class="file-size">2.11 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é»˜è®¤å¤åˆ¶æ•°æ®ç®¡ç†å®ç°</strong>ã€‚é€šè¿‡ <code>gen_server:call</code> 
                        ä¸ <code>eh_data_server</code> é€šä¿¡ï¼Œä»£ç†æ‰€æœ‰æ•°æ®æ“ä½œã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">æ•°æ®ä»£ç†</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å­˜å‚¨æ•°æ® -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.3 å­˜å‚¨æ•°æ®åºåˆ—åŒ– (Storage Data Serialization)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_storage_data.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">30 è¡Œ</span>
                        <span class="file-size">1.09 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å­˜å‚¨æ•°æ®è¡Œä¸ºå®šä¹‰</strong>ã€‚å®šä¹‰äºŒè¿›åˆ¶åºåˆ—åŒ–æ¥å£ï¼š
                        <code>entry_to_binary</code>ã€<code>binary_to_entry</code>ã€<code>header_byte_size</code>ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">åºåˆ—åŒ–</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_storage_data_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">70 è¡Œ</span>
                        <span class="file-size">2.15 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é»˜è®¤å­˜å‚¨åºåˆ—åŒ–å®ç°</strong>ã€‚ä½¿ç”¨ <code>term_to_binary</code> åºåˆ—åŒ–ï¼Œ
                        SHA-1 å“ˆå¸Œæ ¡éªŒï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">SHAæ ¡éªŒ</span>
                        <span class="tag">äºŒè¿›åˆ¶</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å†™å†²çªè§£å†³ -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.4 å†™å†²çªè§£å†³å™¨ (Write Conflict Resolver)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_write_conflict_resolver.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">22 è¡Œ</span>
                        <span class="file-size">874 B</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å†™å†²çªè§£å†³è¡Œä¸ºå®šä¹‰</strong>ã€‚å®šä¹‰ <code>resolve/2</code> å›è°ƒï¼Œ
                        ç”¨äºè§£å†³å¹¶å‘å†™å…¥å†²çªã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">å†²çªè§£å†³</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_write_conflict_resolver_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">33 è¡Œ</span>
                        <span class="file-size">1.13 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é»˜è®¤å†²çªè§£å†³å®ç°</strong>ã€‚ä¸‰æ¡è§„åˆ™ï¼š
                        é¢„æ›´æ–°vsé¢„æ›´æ–°â†’max(NodeId)ï¼›é¢„æ›´æ–°vså·²ç¡®è®¤â†’å·²ç¡®è®¤è·èƒœï¼›å·²ç¡®è®¤vsé¢„æ›´æ–°â†’å·²ç¡®è®¤è·èƒœã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">maxç­–ç•¥</span>
                        <span class="tag">ç¡®å®šæ€§</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æŸ¥è¯¢å¤„ç† -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.5 æŸ¥è¯¢å¤„ç†å™¨ (Query Handler)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_query_handler.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">93 è¡Œ</span>
                        <span class="file-size">2.91 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æŸ¥è¯¢å¤„ç†è¡Œä¸ºå®šä¹‰ + å…¬å…±å‡½æ•°</strong>ã€‚å®šä¹‰ <code>process/6</code> å›è°ƒï¼Œ
                        æä¾› <code>reply</code>ã€<code>error_*</code>ã€<code>updated</code> ç­‰å“åº”å‡½æ•°ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">æŸ¥è¯¢å¤„ç†</span>
                        <span class="tag">å“åº”æ„é€ </span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_no_wait_query_handler_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">30 è¡Œ</span>
                        <span class="file-size">1.02 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ä¸ç­‰å¾…æŸ¥è¯¢å¤„ç†</strong>ã€‚æ•°æ®æ­£åœ¨æ›´æ–°æ—¶ç«‹å³è¿”å› <code>being_updated</code> é”™è¯¯ï¼Œ
                        ä¸é˜»å¡å®¢æˆ·ç«¯ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">éé˜»å¡</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_wait_query_handler_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">30 è¡Œ</span>
                        <span class="file-size">1.01 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ç­‰å¾…æŸ¥è¯¢å¤„ç†</strong>ã€‚æ•°æ®æ­£åœ¨æ›´æ–°æ—¶å°†æŸ¥è¯¢åŠ å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œ
                        æ›´æ–°å®Œæˆåè‡ªåŠ¨å›å¤ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">é˜»å¡ç­‰å¾…</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_aq_query_handler_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">34 è¡Œ</span>
                        <span class="file-size">1.24 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å°¾èŠ‚ç‚¹æŸ¥è¯¢å¤„ç†</strong>ã€‚å°†æŸ¥è¯¢è½¬å‘åˆ°å°¾èŠ‚ç‚¹å¤„ç†ï¼Œ
                        ä¿è¯è¯»å–æœ€æ–°å·²ç¡®è®¤æ•°æ®ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">å°¾èŠ‚ç‚¹è½¬å‘</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_dirty_read_query_handler_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">30 è¡Œ</span>
                        <span class="file-size">1.02 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>è„è¯»æŸ¥è¯¢å¤„ç†</strong>ã€‚ç›´æ¥è¯»å–æœ¬åœ°æ•°æ®ï¼Œ
                        ä¸ä¿è¯ä¸€è‡´æ€§ï¼Œä½†æ€§èƒ½æœ€é«˜ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">è„è¯»</span>
                        <span class="tag">é«˜æ€§èƒ½</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å”¯ä¸€IDç”Ÿæˆ -->
        <h3 style="color: #7c3aed; margin: 30px 0 15px 0;">4.6 å”¯ä¸€IDç”Ÿæˆå™¨ (Unique ID Generator)</h3>
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_unique_id_generator.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">22 è¡Œ</span>
                        <span class="file-size">838 B</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å”¯ä¸€IDç”Ÿæˆè¡Œä¸ºå®šä¹‰</strong>ã€‚å®šä¹‰ <code>unique_id/0</code> å›è°ƒã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">behaviour</span>
                        <span class="tag">IDç”Ÿæˆ</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_unique_id_generator_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">29 è¡Œ</span>
                        <span class="file-size">929 B</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>é»˜è®¤IDç”Ÿæˆå®ç°</strong>ã€‚ä½¿ç”¨ Erlang å†…ç½® <code>make_ref()</code> 
                        ç”Ÿæˆå…¨å±€å”¯ä¸€å¼•ç”¨ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">APIå®ç°</span>
                        <span class="tag">make_ref</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== æ ¸å¿ƒé€»è¾‘å±‚ ========== -->
        <h2><span class="icon">ğŸ§ </span> äº”ã€æ ¸å¿ƒé€»è¾‘å±‚ (Core Logic Layer)</h2>
        <p class="category-desc">CRAQ åè®®æ ¸å¿ƒç®—æ³•å®ç°</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_repl_ring.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">93 è¡Œ</span>
                        <span class="file-size">3.06 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å¤åˆ¶ç¯æ‹“æ‰‘ç®¡ç†</strong>ã€‚è®¡ç®—èŠ‚ç‚¹çš„å‰é©± (<code>predecessor</code>) å’Œåç»§ (<code>successor</code>)ï¼Œ
                        æ”¯æŒèŠ‚ç‚¹æ·»åŠ  (<code>add</code>) å’Œç§»é™¤ (<code>drop</code>)ï¼Œç»´æŠ¤é“¾å¼æ‹“æ‰‘ç»“æ„ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">æ‹“æ‰‘è®¡ç®—</span>
                        <span class="tag">é“¾å¼å¤åˆ¶</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_node_timestamp.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">255 è¡Œ</span>
                        <span class="file-size">10.8 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>èŠ‚ç‚¹æ—¶é—´æˆ³ä¸æ¶ˆæ¯éªŒè¯</strong>ã€‚ç®¡ç†é€»è¾‘æ—¶é—´æˆ³ï¼ŒéªŒè¯æ¶ˆæ¯æœ‰æ•ˆæ€§ 
                        (<code>valid_pre_update_msg</code>ã€<code>valid_update_msg</code>)ï¼Œ
                        è°ƒç”¨å†™å†²çªè§£å†³å™¨ï¼Œæ›´æ–°æ¶ˆæ¯çŠ¶æ€ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">æ—¶é—´æˆ³</span>
                        <span class="tag">æ¶ˆæ¯éªŒè¯</span>
                        <span class="tag">å†²çªæ£€æµ‹</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_node_state.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">90 è¡Œ</span>
                        <span class="file-size">2.62 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>èŠ‚ç‚¹çŠ¶æ€ç®¡ç†</strong>ã€‚ç®¡ç†èŠ‚ç‚¹çŠ¶æ€è½¬æ¢ï¼š
                        <code>not_ready â†’ transient â†’ ready</code>ï¼Œ
                        æä¾›çŠ¶æ€æŸ¥è¯¢å‡½æ•° (<code>data_state</code>ã€<code>client_state</code>ã€<code>snapshot_state</code>)ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">çŠ¶æ€æœº</span>
                        <span class="tag">çŠ¶æ€è½¬æ¢</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_update_msg.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">141 è¡Œ</span>
                        <span class="file-size">5.74 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ›´æ–°æ¶ˆæ¯å¤„ç†</strong>ã€‚æ„é€ å’Œè§£ææ›´æ–°æ¶ˆæ¯ (<code>#eh_update_msg_key{}</code>ã€
                        <code>#eh_update_msg_data{}</code>)ï¼Œæä¾›æ¶ˆæ¯è¿‡æ»¤ã€åˆ†åŒºã€æŸ¥æ‰¾ç­‰æ“ä½œã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">æ¶ˆæ¯æ„é€ </span>
                        <span class="tag">æ¶ˆæ¯è§£æ</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_persist_data.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">43 è¡Œ</span>
                        <span class="file-size">1.27 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ•°æ®æŒä¹…åŒ–æ§åˆ¶</strong>ã€‚æä¾› <code>persist_data/2</code> å’Œ 
                        <code>no_persist_data/2</code> ä¸¤ä¸ªå‡½æ•°ï¼Œæ§åˆ¶ä½•æ—¶æŒä¹…åŒ–æ•°æ®ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag core">æ ¸å¿ƒ</span>
                        <span class="tag">æŒä¹…åŒ–æ§åˆ¶</span>
                        <span class="tag">ä¸¤é˜¶æ®µæäº¤</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== æ•°æ®å­˜å‚¨å±‚ ========== -->
        <h2><span class="icon">ğŸ’¾</span> å…­ã€æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)</h2>
        <p class="category-desc">æ•°æ®å­˜å‚¨ã€åºåˆ—åŒ–å’Œæ–‡ä»¶æ“ä½œ</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_data_util.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">244 è¡Œ</span>
                        <span class="file-size">10.41 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ•°æ®æ“ä½œå·¥å…·</strong>ã€‚æä¾›æ•°æ®æŸ¥è¯¢ (<code>query_data</code>)ã€
                        å¿«ç…§ (<code>snapshot_data</code>)ã€åˆå¹¶ (<code>merge_data</code>)ã€
                        æ„é€  (<code>make_data</code>) ç­‰æ ¸å¿ƒæ•°æ®æ“ä½œã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">æ•°æ®æ“ä½œ</span>
                        <span class="tag">é˜Ÿåˆ—å¤„ç†</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_storage_data_operation_api.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">125 è¡Œ</span>
                        <span class="file-size">5.12 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>å­˜å‚¨æ“ä½œæ¥å£</strong>ã€‚æä¾›æ–‡ä»¶è¯»å†™æ“ä½œï¼š
                        <code>open</code>ã€<code>close</code>ã€<code>read</code>ã€<code>read_all</code>ã€<code>write</code>ï¼Œ
                        æ”¯æŒæ•°æ®æ£€æŸ¥ç‚¹å’Œæ–‡ä»¶ç‰ˆæœ¬ç®¡ç†ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag api">API</span>
                        <span class="tag">æ–‡ä»¶IO</span>
                        <span class="tag">ç‰ˆæœ¬ç®¡ç†</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_persist_storage_data.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">58 è¡Œ</span>
                        <span class="file-size">1.95 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>åº•å±‚æ–‡ä»¶æ“ä½œ</strong>ã€‚å°è£… Erlang <code>file</code> æ¨¡å—ï¼Œ
                        æä¾› <code>open_data_file</code>ã€<code>write_data</code>ã€<code>read_data</code>ã€<code>truncate_data</code>ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">æ–‡ä»¶æ“ä½œ</span>
                        <span class="tag">äºŒè¿›åˆ¶IO</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_file_name.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">94 è¡Œ</span>
                        <span class="file-size">3.32 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ–‡ä»¶åç®¡ç†</strong>ã€‚ç”Ÿæˆå¸¦èŠ‚ç‚¹åå’Œç‰ˆæœ¬å·çš„æ–‡ä»¶åï¼Œ
                        æ”¯æŒç‰ˆæœ¬åŒ–æ–‡ä»¶åˆ—è¡¨è·å–ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">æ–‡ä»¶å‘½å</span>
                        <span class="tag">ç‰ˆæœ¬å·</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== äº‹ä»¶ä¸æ—¥å¿—å±‚ ========== -->
        <h2><span class="icon">ğŸ“</span> ä¸ƒã€äº‹ä»¶ä¸æ—¥å¿—å±‚ (Event & Logging Layer)</h2>
        <p class="category-desc">ç³»ç»Ÿäº‹ä»¶å¤„ç†å’Œæ—¥å¿—è®°å½•</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_event.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">59 è¡Œ</span>
                        <span class="file-size">1.84 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>äº‹ä»¶ç®¡ç†å™¨</strong>ã€‚å°è£… <code>gen_event</code>ï¼Œ
                        æä¾› <code>state</code>ã€<code>data_state</code>ã€<code>message</code>ã€<code>data</code> äº‹ä»¶å‘é€ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag">gen_event</span>
                        <span class="tag">äº‹ä»¶å‘å¸ƒ</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_event_handler.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">146 è¡Œ</span>
                        <span class="file-size">4.81 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>äº‹ä»¶å¤„ç†å™¨</strong>ã€‚å®ç° <code>gen_event</code> å›è°ƒï¼Œ
                        æ ¼å¼åŒ–å¹¶è¾“å‡ºç³»ç»ŸçŠ¶æ€ã€æ¶ˆæ¯ã€æ•°æ®å˜åŒ–ç­‰äº‹ä»¶åˆ°æ–‡ä»¶æˆ–æ ‡å‡†è¾“å‡ºã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag behaviour">gen_event</span>
                        <span class="tag">æ—¥å¿—æ ¼å¼åŒ–</span>
                        <span class="tag">è°ƒè¯•è¾“å‡º</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== å·¥å…·å±‚ ========== -->
        <h2><span class="icon">ğŸ”§</span> å…«ã€å·¥å…·å±‚ (Utility Layer)</h2>
        <p class="category-desc">é€šç”¨å·¥å…·å‡½æ•°</p>
        
        <div class="file-grid">
            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">eh_system_util.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">150 è¡Œ</span>
                        <span class="file-size">3.42 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>ç³»ç»Ÿå·¥å…·å‡½æ•°</strong>ã€‚æä¾›èŠ‚ç‚¹åå¤„ç†ã€Set æ“ä½œå°è£… 
                        (<code>new_set</code>ã€<code>add_set</code>ã€<code>fold_set</code>)ã€
                        Map æ“ä½œå°è£… (<code>new_map</code>ã€<code>add_map</code>ã€<code>partition_map</code>)ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">Setæ“ä½œ</span>
                        <span class="tag">Mapæ“ä½œ</span>
                    </div>
                </div>
            </div>

            <div class="file-card">
                <div class="file-header">
                    <span class="file-name">erlang_craq_validate.erl</span>
                    <div class="file-meta">
                        <span class="file-lines">71 è¡Œ</span>
                        <span class="file-size">1.90 KB</span>
                    </div>
                </div>
                <div class="file-body">
                    <p class="file-desc">
                        <strong>æ•°æ®éªŒè¯å·¥å…·</strong>ã€‚æä¾›é›†ç¾¤æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥ (<code>check_data</code>)ã€
                        æ•°æ®è§†å›¾è·å– (<code>data_view</code>)ã€ç¼ºå¤±æ•°æ®æ£€æµ‹ (<code>missing_data</code>)ã€‚
                    </p>
                    <div class="file-tags">
                        <span class="tag util">å·¥å…·</span>
                        <span class="tag">ä¸€è‡´æ€§æ£€æŸ¥</span>
                        <span class="tag">è°ƒè¯•</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== å®Œæ•´æ–‡ä»¶åˆ—è¡¨ ========== -->
        <h2><span class="icon">ğŸ“Š</span> ä¹ã€å®Œæ•´æ–‡ä»¶åˆ—è¡¨</h2>
        
        <table class="summary-table">
            <thead>
                <tr>
                    <th>æ–‡ä»¶å</th>
                    <th style="text-align: center;">è¡Œæ•°</th>
                    <th style="text-align: center;">å¤§å°</th>
                    <th>ç±»å‹</th>
                    <th>æ ¸å¿ƒåŠŸèƒ½</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="file-name-col">eh_system_server.erl</td>
                    <td class="lines-col">460</td>
                    <td class="size-col">21.98 KB</td>
                    <td><span class="tag server">gen_server</span></td>
                    <td>CRAQ åè®®æ ¸å¿ƒï¼Œæ¶ˆæ¯å¤„ç†ä¸­å¿ƒ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_node_timestamp.erl</td>
                    <td class="lines-col">255</td>
                    <td class="size-col">10.8 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>æ—¶é—´æˆ³ç®¡ç†ï¼Œæ¶ˆæ¯éªŒè¯ï¼Œå†²çªæ£€æµ‹</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_data_util.erl</td>
                    <td class="lines-col">244</td>
                    <td class="size-col">10.41 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>æ•°æ®æŸ¥è¯¢ã€å¿«ç…§ã€åˆå¹¶æ“ä½œ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_system_config.erl</td>
                    <td class="lines-col">170</td>
                    <td class="size-col">7.77 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>ç³»ç»Ÿé…ç½®ç®¡ç†ï¼Œç»„ä»¶æ³¨å†Œ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_data_server.erl</td>
                    <td class="lines-col">164</td>
                    <td class="size-col">6.13 KB</td>
                    <td><span class="tag server">gen_server</span></td>
                    <td>æœ¬åœ°æ•°æ®å­˜å‚¨æœåŠ¡</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_system_util.erl</td>
                    <td class="lines-col">150</td>
                    <td class="size-col">3.42 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>Set/Map æ“ä½œå°è£…</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_event_handler.erl</td>
                    <td class="lines-col">146</td>
                    <td class="size-col">4.81 KB</td>
                    <td><span class="tag behaviour">gen_event</span></td>
                    <td>äº‹ä»¶æ ¼å¼åŒ–è¾“å‡º</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_update_msg.erl</td>
                    <td class="lines-col">141</td>
                    <td class="size-col">5.74 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>æ›´æ–°æ¶ˆæ¯æ„é€ è§£æ</td>
                </tr>
                <tr>
                    <td class="file-name-col">erlang_craq.erl</td>
                    <td class="lines-col">139</td>
                    <td class="size-col">4.66 KB</td>
                    <td><span class="tag core">å…¥å£</span></td>
                    <td>å®¢æˆ·ç«¯ API æ¥å£</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_storage_data_operation_api.erl</td>
                    <td class="lines-col">125</td>
                    <td class="size-col">5.12 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>æ–‡ä»¶è¯»å†™æ“ä½œ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_file_name.erl</td>
                    <td class="lines-col">94</td>
                    <td class="size-col">3.32 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>æ–‡ä»¶åç‰ˆæœ¬ç®¡ç†</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_query_handler.erl</td>
                    <td class="lines-col">93</td>
                    <td class="size-col">2.91 KB</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>æŸ¥è¯¢å¤„ç†æ¥å£</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_repl_ring.erl</td>
                    <td class="lines-col">93</td>
                    <td class="size-col">3.06 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>å¤åˆ¶ç¯æ‹“æ‰‘è®¡ç®—</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_node_state.erl</td>
                    <td class="lines-col">90</td>
                    <td class="size-col">2.62 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>èŠ‚ç‚¹çŠ¶æ€æœº</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_system_sup.erl</td>
                    <td class="lines-col">72</td>
                    <td class="size-col">2.84 KB</td>
                    <td><span class="tag behaviour">supervisor</span></td>
                    <td>ç³»ç»Ÿå­ç›‘ç£è€…</td>
                </tr>
                <tr>
                    <td class="file-name-col">erlang_craq_validate.erl</td>
                    <td class="lines-col">71</td>
                    <td class="size-col">1.90 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>æ•°æ®ä¸€è‡´æ€§éªŒè¯</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_storage_data_api.erl</td>
                    <td class="lines-col">70</td>
                    <td class="size-col">2.15 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>æ•°æ®åºåˆ—åŒ– (SHAæ ¡éªŒ)</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_repl_data_manager_api.erl</td>
                    <td class="lines-col">65</td>
                    <td class="size-col">2.11 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>æ•°æ®ç®¡ç†ä»£ç†</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_sup.erl</td>
                    <td class="lines-col">65</td>
                    <td class="size-col">2.41 KB</td>
                    <td><span class="tag behaviour">supervisor</span></td>
                    <td>é¡¶å±‚ç›‘ç£è€…</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_event.erl</td>
                    <td class="lines-col">59</td>
                    <td class="size-col">1.84 KB</td>
                    <td><span class="tag">gen_event</span></td>
                    <td>äº‹ä»¶ç®¡ç†å™¨</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_persist_storage_data.erl</td>
                    <td class="lines-col">58</td>
                    <td class="size-col">1.95 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>åº•å±‚æ–‡ä»¶æ“ä½œ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_app.erl</td>
                    <td class="lines-col">44</td>
                    <td class="size-col">1.37 KB</td>
                    <td><span class="tag behaviour">application</span></td>
                    <td>OTP åº”ç”¨å…¥å£</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_persist_data.erl</td>
                    <td class="lines-col">43</td>
                    <td class="size-col">1.27 KB</td>
                    <td><span class="tag core">æ ¸å¿ƒ</span></td>
                    <td>æŒä¹…åŒ–æ§åˆ¶</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_failure_detector_api.erl</td>
                    <td class="lines-col">42</td>
                    <td class="size-col">1.26 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>è¿›ç¨‹ç›‘æ§æ•…éšœæ£€æµ‹</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_repl_data_manager.erl</td>
                    <td class="lines-col">39</td>
                    <td class="size-col">1.26 KB</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>æ•°æ®ç®¡ç†æ¥å£å®šä¹‰</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_aq_query_handler_api.erl</td>
                    <td class="lines-col">34</td>
                    <td class="size-col">1.24 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>å°¾èŠ‚ç‚¹æŸ¥è¯¢è½¬å‘</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_write_conflict_resolver_api.erl</td>
                    <td class="lines-col">33</td>
                    <td class="size-col">1.13 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>å†™å†²çªè§£å†³ (maxç­–ç•¥)</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_storage_data.erl</td>
                    <td class="lines-col">30</td>
                    <td class="size-col">1.09 KB</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>åºåˆ—åŒ–æ¥å£å®šä¹‰</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_no_wait_query_handler_api.erl</td>
                    <td class="lines-col">30</td>
                    <td class="size-col">1.02 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>éé˜»å¡æŸ¥è¯¢</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_wait_query_handler_api.erl</td>
                    <td class="lines-col">30</td>
                    <td class="size-col">1.01 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>é˜»å¡ç­‰å¾…æŸ¥è¯¢</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_dirty_read_query_handler_api.erl</td>
                    <td class="lines-col">30</td>
                    <td class="size-col">1.02 KB</td>
                    <td><span class="tag api">API</span></td>
                    <td>è„è¯»æŸ¥è¯¢</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_config.erl</td>
                    <td class="lines-col">29</td>
                    <td class="size-col">1.02 KB</td>
                    <td><span class="tag util">å·¥å…·</span></td>
                    <td>é…ç½®è¯»å–</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_unique_id_generator_api.erl</td>
                    <td class="lines-col">29</td>
                    <td class="size-col">929 B</td>
                    <td><span class="tag api">API</span></td>
                    <td>make_ref IDç”Ÿæˆ</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_failure_detector.erl</td>
                    <td class="lines-col">27</td>
                    <td class="size-col">991 B</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>æ•…éšœæ£€æµ‹æ¥å£å®šä¹‰</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_write_conflict_resolver.erl</td>
                    <td class="lines-col">22</td>
                    <td class="size-col">874 B</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>å†²çªè§£å†³æ¥å£å®šä¹‰</td>
                </tr>
                <tr>
                    <td class="file-name-col">eh_unique_id_generator.erl</td>
                    <td class="lines-col">22</td>
                    <td class="size-col">838 B</td>
                    <td><span class="tag behaviour">behaviour</span></td>
                    <td>IDç”Ÿæˆæ¥å£å®šä¹‰</td>
                </tr>
            </tbody>
        </table>

        <!-- ========== æ¶æ„å›¾ ========== -->
        <h2><span class="icon">ğŸ›ï¸</span> åã€ç³»ç»Ÿæ¶æ„å›¾</h2>
        
        <div class="architecture-diagram">
            <div class="arch-layer">
                <div class="arch-layer-title">ğŸ“± å®¢æˆ·ç«¯å±‚ (Client Layer)</div>
                <div class="arch-modules">
                    <div class="arch-module highlight">erlang_craq</div>
                </div>
            </div>
            
            <div style="text-align: center; color: #fbbf24; font-size: 1.5em; margin: 10px 0;">â¬‡ï¸</div>
            
            <div class="arch-layer">
                <div class="arch-layer-title">ğŸŒ³ ç›‘ç£æ ‘å±‚ (Supervision Layer)</div>
                <div class="arch-modules">
                    <div class="arch-module">eh_app</div>
                    <div class="arch-module">eh_sup</div>
                    <div class="arch-module">eh_system_sup</div>
                </div>
            </div>
            
            <div style="text-align: center; color: #fbbf24; font-size: 1.5em; margin: 10px 0;">â¬‡ï¸</div>
            
            <div class="arch-layer">
                <div class="arch-layer-title">âš™ï¸ æ ¸å¿ƒæœåŠ¡å±‚ (Core Server Layer)</div>
                <div class="arch-modules">
                    <div class="arch-module highlight">eh_system_server</div>
                    <div class="arch-module highlight">eh_data_server</div>
                </div>
            </div>
            
            <div style="text-align: center; color: #fbbf24; font-size: 1.5em; margin: 10px 0;">â¬‡ï¸</div>
            
            <div class="arch-layer">
                <div class="arch-layer-title">ğŸ§  æ ¸å¿ƒé€»è¾‘å±‚ (Core Logic Layer)</div>
                <div class="arch-modules">
                    <div class="arch-module">eh_repl_ring</div>
                    <div class="arch-module">eh_node_timestamp</div>
                    <div class="arch-module">eh_node_state</div>
                    <div class="arch-module">eh_update_msg</div>
                    <div class="arch-module">eh_persist_data</div>
                </div>
            </div>
            
            <div style="text-align: center; color: #fbbf24; font-size: 1.5em; margin: 10px 0;">â¬‡ï¸</div>
            
            <div class="arch-layer">
                <div class="arch-layer-title">ğŸ”Œ å¯æ’æ‹”ç»„ä»¶å±‚ (Pluggable Components)</div>
                <div class="arch-modules">
                    <div class="arch-module">eh_failure_detector[_api]</div>
                    <div class="arch-module">eh_repl_data_manager[_api]</div>
                    <div class="arch-module">eh_storage_data[_api]</div>
                    <div class="arch-module">eh_write_conflict_resolver[_api]</div>
                    <div class="arch-module">eh_query_handler[_api]</div>
                    <div class="arch-module">eh_unique_id_generator[_api]</div>
                </div>
            </div>
            
            <div style="text-align: center; color: #fbbf24; font-size: 1.5em; margin: 10px 0;">â¬‡ï¸</div>
            
            <div class="arch-layer">
                <div class="arch-layer-title">ğŸ’¾ æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)</div>
                <div class="arch-modules">
                    <div class="arch-module">eh_data_util</div>
                    <div class="arch-module">eh_storage_data_operation_api</div>
                    <div class="arch-module">eh_persist_storage_data</div>
                    <div class="arch-module">eh_file_name</div>
                </div>
            </div>
        </div>

    </div>

<!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="back-to-top" style="
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #00d4ff, #7c3aed);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
    transition: all 0.3s ease;
    z-index: 999;
    opacity: 0;
    transform: translateY(20px);
" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" 
   onmouseover="this.style.transform='translateY(-5px) scale(1.1)'" 
   onmouseout="this.style.transform='translateY(0) scale(1)'">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
        <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
    </svg>
</div>

<script>
// å›åˆ°é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤º/éšè—é€»è¾‘
window.addEventListener('scroll', function() {
    const backToTop = document.getElementById('back-to-top');
    if (window.scrollY > 300) {
        backToTop.style.opacity = '1';
        backToTop.style.transform = 'translateY(0)';
    } else {
        backToTop.style.opacity = '0';
        backToTop.style.transform = 'translateY(20px)';
    }
});
</script>

</body>
</html>
