<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErlangäºŒè¿›åˆ¶åºåˆ—åŒ–æ•°æ®æ˜ å°„è§£æ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .section {
            background: white;
            margin: 20px 0;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-left: 5px solid #667eea;
        }
        .mapping-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .mapping-table th, .mapping-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .mapping-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .byte-highlight {
            background-color: #ffeb3b;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .source-highlight {
            background-color: #c8e6c9;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .format-highlight {
            background-color: #ffcdd2;
            font-weight: bold;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .binary-breakdown {
            background: #e8f5e8;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .erlang-format {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .visual-mapping {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .byte-box {
            display: inline-block;
            padding: 5px 8px;
            margin: 2px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            min-width: 25px;
        }
        .version-byte { background-color: #ffcdd2; }
        .tuple-byte { background-color: #f8bbd9; }
        .atom-byte { background-color: #e1bee7; }
        .length-byte { background-color: #c5cae9; }
        .string-byte { background-color: #bbdefb; }
        .int-byte { background-color: #b2dfdb; }
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” ErlangäºŒè¿›åˆ¶åºåˆ—åŒ–æ•°æ®æ˜ å°„è§£æ</h1>
        <p>é€å­—èŠ‚åˆ†æterm_to_binaryå¦‚ä½•å°†æºæ•°æ®è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼</p>
    </div>

    <div class="section">
        <h2>ğŸ“‹ æºæ•°æ®ç»“æ„</h2>
        <div class="code-block">
<span class="source-highlight">{eh_storage_data, person, 10, 1, 1, 1, name, john}</span>

å­—æ®µè§£æ:
- è®°å½•åç§°: eh_storage_data (atom, 15å­—ç¬¦)
- å¯¹è±¡ç±»å‹: person (atom, 6å­—ç¬¦)  
- å¯¹è±¡ID: 10 (integer)
- æ—¶é—´æˆ³: 1 (integer)
- å­—æ®µID: 1 (integer)
- æ´»è·ƒçŠ¶æ€: 1 (integer)
- å­—æ®µå: name (atom, 4å­—ç¬¦)
- å­—æ®µå€¼: john (atom, 4å­—ç¬¦)
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”¢ äºŒè¿›åˆ¶æ•°æ®å®Œæ•´æ˜ å°„</h2>
        
        <div class="binary-breakdown">
            <h3>ğŸ“¦ åŸå§‹äºŒè¿›åˆ¶æ•°æ® (48å­—èŠ‚)</h3>
            <div class="code-block">
131,104,8,119,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,119,
6,112,101,114,115,111,110,97,10,97,1,97,1,97,1,119,4,110,97,109,101,119,4,
106,111,104,110
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color version-byte"></div>
                <span>ç‰ˆæœ¬æ ‡è¯†</span>
            </div>
            <div class="legend-item">
                <div class="legend-color tuple-byte"></div>
                <span>Tupleæ ‡è¯†</span>
            </div>
            <div class="legend-item">
                <div class="legend-color atom-byte"></div>
                <span>Atomæ ‡è¯†</span>
            </div>
            <div class="legend-item">
                <div class="legend-color length-byte"></div>
                <span>é•¿åº¦å­—æ®µ</span>
            </div>
            <div class="legend-item">
                <div class="legend-color string-byte"></div>
                <span>å­—ç¬¦ä¸²æ•°æ®</span>
            </div>
            <div class="legend-item">
                <div class="legend-color int-byte"></div>
                <span>å°æ•´æ•°</span>
            </div>
        </div>

        <div class="visual-mapping">
            <div class="byte-box version-byte">131</div>
            <div class="byte-box tuple-byte">104</div>
            <div class="byte-box tuple-byte">8</div>
            <div class="byte-box atom-byte">119</div>
            <div class="byte-box length-byte">15</div>
            <div class="byte-box string-byte">101</div>
            <div class="byte-box string-byte">104</div>
            <div class="byte-box string-byte">95</div>
            <div class="byte-box string-byte">115</div>
            <div class="byte-box string-byte">116</div>
            <div class="byte-box string-byte">111</div>
            <div class="byte-box string-byte">114</div>
            <div class="byte-box string-byte">97</div>
            <div class="byte-box string-byte">103</div>
            <div class="byte-box string-byte">101</div>
            <div class="byte-box string-byte">95</div>
            <div class="byte-box string-byte">100</div>
            <div class="byte-box string-byte">97</div>
            <div class="byte-box string-byte">116</div>
            <div class="byte-box string-byte">97</div>
            <div class="byte-box atom-byte">119</div>
            <div class="byte-box length-byte">6</div>
            <div class="byte-box string-byte">112</div>
            <div class="byte-box string-byte">101</div>
            <div class="byte-box string-byte">114</div>
            <div class="byte-box string-byte">115</div>
            <div class="byte-box string-byte">111</div>
            <div class="byte-box string-byte">110</div>
            <div class="byte-box int-byte">97</div>
            <div class="byte-box int-byte">10</div>
            <div class="byte-box int-byte">97</div>
            <div class="byte-box int-byte">1</div>
            <div class="byte-box int-byte">97</div>
            <div class="byte-box int-byte">1</div>
            <div class="byte-box int-byte">97</div>
            <div class="byte-box int-byte">1</div>
            <div class="byte-box atom-byte">119</div>
            <div class="byte-box length-byte">4</div>
            <div class="byte-box string-byte">110</div>
            <div class="byte-box string-byte">97</div>
            <div class="byte-box string-byte">109</div>
            <div class="byte-box string-byte">101</div>
            <div class="byte-box atom-byte">119</div>
            <div class="byte-box length-byte">4</div>
            <div class="byte-box string-byte">106</div>
            <div class="byte-box string-byte">111</div>
            <div class="byte-box string-byte">104</div>
            <div class="byte-box string-byte">110</div>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ” é€å­—èŠ‚è¯¦ç»†æ˜ å°„è¡¨</h2>
        
        <table class="mapping-table">
            <tr>
                <th>å­—èŠ‚ä½ç½®</th>
                <th>åè¿›åˆ¶å€¼</th>
                <th>åå…­è¿›åˆ¶</th>
                <th>ASCIIå­—ç¬¦</th>
                <th>Erlangæ ¼å¼å«ä¹‰</th>
                <th>å¯¹åº”æºæ•°æ®</th>
            </tr>
            <tr>
                <td>0</td>
                <td><span class="byte-highlight">131</span></td>
                <td>0x83</td>
                <td>-</td>
                <td><span class="format-highlight">å¤–éƒ¨æ ¼å¼ç‰ˆæœ¬æ ‡è¯†</span></td>
                <td>ErlangäºŒè¿›åˆ¶æ ¼å¼æ ‡è¯†</td>
            </tr>
            <tr>
                <td>1</td>
                <td><span class="byte-highlight">104</span></td>
                <td>0x68</td>
                <td>h</td>
                <td><span class="format-highlight">LARGE_TUPLE_EXT</span></td>
                <td>8å…ƒç´ tupleå¼€å§‹</td>
            </tr>
            <tr>
                <td>2</td>
                <td><span class="byte-highlight">8</span></td>
                <td>0x08</td>
                <td>-</td>
                <td><span class="format-highlight">Tupleå…ƒç´ æ•°é‡</span></td>
                <td>8ä¸ªå­—æ®µçš„record</td>
            </tr>
            <tr>
                <td>3</td>
                <td><span class="byte-highlight">119</span></td>
                <td>0x77</td>
                <td>w</td>
                <td><span class="format-highlight">ATOM_UTF8_EXT</span></td>
                <td>atomå¼€å§‹æ ‡è¯†</td>
            </tr>
            <tr>
                <td>4</td>
                <td><span class="byte-highlight">15</span></td>
                <td>0x0F</td>
                <td>-</td>
                <td><span class="format-highlight">Atomé•¿åº¦</span></td>
                <td>"eh_storage_data"é•¿åº¦</td>
            </tr>
            <tr>
                <td>5-19</td>
                <td>101,104,95,115,116,111,114,97,103,101,95,100,97,116,97</td>
                <td>-</td>
                <td><span class="source-highlight">eh_storage_data</span></td>
                <td><span class="format-highlight">Atomå­—ç¬¦ä¸²</span></td>
                <td>è®°å½•åç§°</td>
            </tr>
            <tr>
                <td>20</td>
                <td><span class="byte-highlight">119</span></td>
                <td>0x77</td>
                <td>w</td>
                <td><span class="format-highlight">ATOM_UTF8_EXT</span></td>
                <td>ç¬¬2ä¸ªatomå¼€å§‹</td>
            </tr>
            <tr>
                <td>21</td>
                <td><span class="byte-highlight">6</span></td>
                <td>0x06</td>
                <td>-</td>
                <td><span class="format-highlight">Atomé•¿åº¦</span></td>
                <td>"person"é•¿åº¦</td>
            </tr>
            <tr>
                <td>22-27</td>
                <td>112,101,114,115,111,110</td>
                <td>-</td>
                <td><span class="source-highlight">person</span></td>
                <td><span class="format-highlight">Atomå­—ç¬¦ä¸²</span></td>
                <td>å¯¹è±¡ç±»å‹</td>
            </tr>
            <tr>
                <td>28</td>
                <td><span class="byte-highlight">97</span></td>
                <td>0x61</td>
                <td>a</td>
                <td><span class="format-highlight">SMALL_INTEGER_EXT</span></td>
                <td>å°æ•´æ•°æ ‡è¯†</td>
            </tr>
            <tr>
                <td>29</td>
                <td><span class="byte-highlight">10</span></td>
                <td>0x0A</td>
                <td>-</td>
                <td><span class="format-highlight">æ•´æ•°å€¼</span></td>
                <td><span class="source-highlight">10</span> (å¯¹è±¡ID)</td>
            </tr>
            <tr>
                <td>30</td>
                <td><span class="byte-highlight">97</span></td>
                <td>0x61</td>
                <td>a</td>
                <td><span class="format-highlight">SMALL_INTEGER_EXT</span></td>
                <td>å°æ•´æ•°æ ‡è¯†</td>
            </tr>
            <tr>
                <td>31</td>
                <td><span class="byte-highlight">1</span></td>
                <td>0x01</td>
                <td>-</td>
                <td><span class="format-highlight">æ•´æ•°å€¼</span></td>
                <td><span class="source-highlight">1</span> (timestamp)</td>
            </tr>
            <tr>
                <td>32</td>
                <td><span class="byte-highlight">97</span></td>
                <td>0x61</td>
                <td>a</td>
                <td><span class="format-highlight">SMALL_INTEGER_EXT</span></td>
                <td>å°æ•´æ•°æ ‡è¯†</td>
            </tr>
            <tr>
                <td>33</td>
                <td><span class="byte-highlight">1</span></td>
                <td>0x01</td>
                <td>-</td>
                <td><span class="format-highlight">æ•´æ•°å€¼</span></td>
                <td><span class="source-highlight">1</span> (field_id)</td>
            </tr>
            <tr>
                <td>34</td>
                <td><span class="byte-highlight">97</span></td>
                <td>0x61</td>
                <td>a</td>
                <td><span class="format-highlight">SMALL_INTEGER_EXT</span></td>
                <td>å°æ•´æ•°æ ‡è¯†</td>
            </tr>
            <tr>
                <td>35</td>
                <td><span class="byte-highlight">1</span></td>
                <td>0x01</td>
                <td>-</td>
                <td><span class="format-highlight">æ•´æ•°å€¼</span></td>
                <td><span class="source-highlight">1</span> (active)</td>
            </tr>
            <tr>
                <td>36</td>
                <td><span class="byte-highlight">119</span></td>
                <td>0x77</td>
                <td>w</td>
                <td><span class="format-highlight">ATOM_UTF8_EXT</span></td>
                <td>ç¬¬6ä¸ªatomå¼€å§‹</td>
            </tr>
            <tr>
                <td>37</td>
                <td><span class="byte-highlight">4</span></td>
                <td>0x04</td>
                <td>-</td>
                <td><span class="format-highlight">Atomé•¿åº¦</span></td>
                <td>"name"é•¿åº¦</td>
            </tr>
            <tr>
                <td>38-41</td>
                <td>110,97,109,101</td>
                <td>-</td>
                <td><span class="source-highlight">name</span></td>
                <td><span class="format-highlight">Atomå­—ç¬¦ä¸²</span></td>
                <td>å­—æ®µåç§°</td>
            </tr>
            <tr>
                <td>42</td>
                <td><span class="byte-highlight">119</span></td>
                <td>0x77</td>
                <td>w</td>
                <td><span class="format-highlight">ATOM_UTF8_EXT</span></td>
                <td>ç¬¬7ä¸ªatomå¼€å§‹</td>
            </tr>
            <tr>
                <td>43</td>
                <td><span class="byte-highlight">4</span></td>
                <td>0x04</td>
                <td>-</td>
                <td><span class="format-highlight">Atomé•¿åº¦</span></td>
                <td>"john"é•¿åº¦</td>
            </tr>
            <tr>
                <td>44-47</td>
                <td>106,111,104,110</td>
                <td>-</td>
                <td><span class="source-highlight">john</span></td>
                <td><span class="format-highlight">Atomå­—ç¬¦ä¸²</span></td>
                <td>å­—æ®µå€¼</td>
            </tr>
        </table>
    </div>

    <div class="section">
        <h2>ğŸ”§ Erlangå¤–éƒ¨æ ¼å¼æ ‡è¯†ç¬¦</h2>
        
        <div class="erlang-format">
            <h3>ğŸ“š å…³é”®æ ¼å¼æ ‡è¯†ç¬¦è§£é‡Š</h3>
            <table class="mapping-table">
                <tr>
                    <th>æ ‡è¯†ç¬¦</th>
                    <th>åè¿›åˆ¶å€¼</th>
                    <th>å«ä¹‰</th>
                    <th>åç»­æ•°æ®</th>
                </tr>
                <tr>
                    <td>VERSION_MAGIC</td>
                    <td>131</td>
                    <td>Erlangå¤–éƒ¨æ ¼å¼ç‰ˆæœ¬</td>
                    <td>å›ºå®šå€¼ï¼Œæ ‡è¯†äºŒè¿›åˆ¶æ ¼å¼</td>
                </tr>
                <tr>
                    <td>LARGE_TUPLE_EXT</td>
                    <td>104</td>
                    <td>å¤§å‹tuple(>255å…ƒç´ )</td>
                    <td>1å­—èŠ‚å…ƒç´ æ•°é‡</td>
                </tr>
                <tr>
                    <td>ATOM_UTF8_EXT</td>
                    <td>119</td>
                    <td>UTF-8ç¼–ç atom</td>
                    <td>1å­—èŠ‚é•¿åº¦ + UTF-8å­—ç¬¦ä¸²</td>
                </tr>
                <tr>
                    <td>SMALL_INTEGER_EXT</td>
                    <td>97</td>
                    <td>0-255èŒƒå›´æ•´æ•°</td>
                    <td>1å­—èŠ‚æ•´æ•°å€¼</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ¯ æ˜ å°„å…³ç³»æ€»ç»“</h2>
        
        <div class="binary-breakdown">
            <h3>ğŸ“Š æ•°æ®ç»“æ„å¯¹åº”å…³ç³»</h3>
            <div class="code-block">
æºæ•°æ®: {eh_storage_data, person, 10, 1, 1, 1, name, john}
         â†“ term_to_binary â†“
äºŒè¿›åˆ¶: [131][104,8][119,15,eh_storage_data][119,6,person][97,10][97,1][97,1][97,1][119,4,name][119,4,john]
         â†‘     â†‘      â†‘                      â†‘              â†‘     â†‘     â†‘     â†‘     â†‘          â†‘
       ç‰ˆæœ¬  8å…ƒç»„   atom(15å­—ç¬¦)           atom(6å­—ç¬¦)    int10  int1  int1  int1  atom(4å­—ç¬¦) atom(4å­—ç¬¦)
            </div>
        </div>

        <div class="erlang-format">
            <h3>ğŸ’¡ å…³é”®è§‚å¯Ÿ</h3>
            <ul>
                <li><strong>é«˜æ•ˆç¼–ç </strong>: å°æ•´æ•°(0-255)åªéœ€2å­—èŠ‚(æ ‡è¯†ç¬¦+å€¼)</li>
                <li><strong>è‡ªæè¿°</strong>: æ¯ä¸ªæ•°æ®ç±»å‹éƒ½æœ‰æ˜ç¡®çš„æ ‡è¯†ç¬¦</li>
                <li><strong>é•¿åº¦å‰ç¼€</strong>: atomä½¿ç”¨é•¿åº¦å‰ç¼€ï¼Œæ”¯æŒå˜é•¿å­—ç¬¦ä¸²</li>
                <li><strong>UTF-8æ”¯æŒ</strong>: ä½¿ç”¨119æ ‡è¯†ç¬¦æ”¯æŒUnicodeå­—ç¬¦</li>
                <li><strong>ç´§å‡‘å­˜å‚¨</strong>: 48å­—èŠ‚å­˜å‚¨8ä¸ªå­—æ®µçš„å¤æ‚ç»“æ„</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ” éªŒè¯æ–¹æ³•</h2>
        
        <div class="code-block">
%% åœ¨Erlang shellä¸­éªŒè¯
1> Data = {eh_storage_data,person,10,1,1,1,name,john}.
2> Binary = term_to_binary(Data).
3> byte_size(Binary).
48
4> binary_to_list(Binary).
[131,104,8,119,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,119,
 6,112,101,114,115,111,110,97,10,97,1,97,1,97,1,119,4,110,97,109,101,119,4,
 106,111,104,110]
5> binary_to_term(Binary).
{eh_storage_data,person,10,1,1,1,name,john}
        </div>
    </div>
</body>
</html>