<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erlang CRAQ äºŒè¿›åˆ¶æ•°æ®æ ¼å¼è¯¦ç»†åˆ†æ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content-section {
            background: white;
            margin: 20px 0;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .content-section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .content-section h3 {
            color: #34495e;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        .binary-format {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        
        .format-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .format-table th {
            background: #3498db;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .format-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .format-table tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .format-table tr:hover {
            background: #e3f2fd;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            line-height: 1.4;
        }
        
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .byte-breakdown {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .byte-section {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 5px;
            padding: 10px;
            text-align: center;
            min-width: 80px;
        }
        
        .byte-section.sha {
            background: #ffebee;
            border-color: #f44336;
        }
        
        .byte-section.size {
            background: #e8f5e8;
            border-color: #4caf50;
        }
        
        .byte-section.data {
            background: #fff3e0;
            border-color: #ff9800;
        }
        
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        
        .example-box {
            background: #f1f3f4;
            border-left: 4px solid #4285f4;
            padding: 20px;
            margin: 20px 0;
        }
        
        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 8px 0;
        }
        
        .toc a {
            color: #007bff;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }
        
        .toc a:hover {
            background-color: #e3f2fd;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content-section {
                padding: 20px;
            }
            
            .format-table {
                font-size: 14px;
            }
            
            .byte-breakdown {
                flex-direction: column;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š Erlang CRAQ äºŒè¿›åˆ¶æ•°æ®æ ¼å¼åˆ†æ</h1>
        <p>æ·±åº¦è§£æ CRAQ ç³»ç»Ÿä¸­æ•°æ®æŒä¹…åŒ–çš„äºŒè¿›åˆ¶ç¼–ç æ ¼å¼</p>
    </div>

    <div class="toc">
        <h3>ğŸ“‹ ç›®å½•</h3>
        <ul>
            <li><a href="#overview">1. æ ¼å¼æ¦‚è§ˆ</a></li>
            <li><a href="#structure">2. æ•°æ®ç»“æ„</a></li>
            <li><a href="#encoding">3. ç¼–ç è¿‡ç¨‹</a></li>
            <li><a href="#format-details">4. æ ¼å¼è¯¦è§£</a></li>
            <li><a href="#examples">5. å®é™…ç¤ºä¾‹</a></li>
            <li><a href="#decoding">6. è§£ç è¿‡ç¨‹</a></li>
            <li><a href="#performance">7. æ€§èƒ½è€ƒè™‘</a></li>
        </ul>
    </div>

    <div class="content-section" id="overview">
        <h2>ğŸ¯ 1. æ ¼å¼æ¦‚è§ˆ</h2>
        
        <p>Erlang CRAQ ç³»ç»Ÿä½¿ç”¨ä¸€ç§<strong>ä¸‰æ®µå¼äºŒè¿›åˆ¶æ ¼å¼</strong>æ¥æŒä¹…åŒ–æ•°æ®ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œé«˜æ•ˆå­˜å‚¨ã€‚</p>
        
        <div class="binary-format">
            <strong>å®Œæ•´äºŒè¿›åˆ¶æ ¼å¼ï¼š</strong><br>
            [SHAå“ˆå¸Œå€¼(20å­—èŠ‚)] + [æ•°æ®å¤§å°(4å­—èŠ‚)] + [åºåˆ—åŒ–æ•°æ®(Nå­—èŠ‚)]
        </div>
        
        <div class="byte-breakdown">
            <div class="byte-section sha">
                <strong>SHA-1 å“ˆå¸Œ</strong><br>
                20 å­—èŠ‚<br>
                æ•°æ®å®Œæ•´æ€§æ ¡éªŒ
            </div>
            <div class="byte-section size">
                <strong>æ•°æ®å¤§å°</strong><br>
                4 å­—èŠ‚<br>
                32ä½æ— ç¬¦å·æ•´æ•°
            </div>
            <div class="byte-section data">
                <strong>åºåˆ—åŒ–æ•°æ®</strong><br>
                N å­—èŠ‚<br>
                Erlang term_to_binary
            </div>
        </div>
        
        <div class="highlight">
            <strong>ğŸ”‘ å…³é”®ç‰¹ç‚¹ï¼š</strong>
            <ul>
                <li><strong>å®Œæ•´æ€§ä¿è¯</strong>ï¼šSHA-1 å“ˆå¸Œç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹</li>
                <li><strong>è‡ªæè¿°æ ¼å¼</strong>ï¼šåŒ…å«æ•°æ®å¤§å°ä¿¡æ¯ï¼Œä¾¿äºè§£æ</li>
                <li><strong>Erlang åŸç”Ÿ</strong>ï¼šä½¿ç”¨ term_to_binary/binary_to_term</li>
                <li><strong>é«˜æ•ˆå­˜å‚¨</strong>ï¼šç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼</li>
            </ul>
        </div>
    </div>

    <div class="content-section" id="structure">
        <h2>ğŸ“‹ 2. æ•°æ®ç»“æ„</h2>
        
        <h3>2.1 eh_storage_data è®°å½•ç»“æ„</h3>
        
        <div class="code-block">
-record(eh_storage_data, {
    object_type     :: atom(),           % å¯¹è±¡ç±»å‹ (å¦‚ person, candidate)
    object_id       :: term(),           % å¯¹è±¡ID (å¦‚ 10, 80)
    timestamp       :: non_neg_integer(), % æ—¶é—´æˆ³ (å¦‚ 3, 8)
    data_index      :: non_neg_integer(), % æ•°æ®ç´¢å¼• (å¦‚ 1, 2)
    status          :: integer(),         % çŠ¶æ€ (é€šå¸¸ä¸º 1=æ´»è·ƒ)
    column          :: atom(),           % åˆ—å (å¦‚ name, age, party)
    value           :: term()            % å€¼ (å¦‚ "john_smith", 40, "republican")
}).
        </div>
        
        <h3>2.2 å®é™…æ•°æ®ç¤ºä¾‹</h3>
        
        <table class="format-table">
            <thead>
                <tr>
                    <th>å­—æ®µ</th>
                    <th>ç¤ºä¾‹å€¼ 1</th>
                    <th>ç¤ºä¾‹å€¼ 2</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>object_type</strong></td>
                    <td>person</td>
                    <td>candidate</td>
                    <td>æ•°æ®å¯¹è±¡çš„ç±»å‹</td>
                </tr>
                <tr>
                    <td><strong>object_id</strong></td>
                    <td>10</td>
                    <td>80</td>
                    <td>å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†ç¬¦</td>
                </tr>
                <tr>
                    <td><strong>timestamp</strong></td>
                    <td>3</td>
                    <td>8</td>
                    <td>æ•°æ®çš„æ—¶é—´æˆ³</td>
                </tr>
                <tr>
                    <td><strong>data_index</strong></td>
                    <td>1</td>
                    <td>2</td>
                    <td>æ•°æ®çš„ç´¢å¼•å·</td>
                </tr>
                <tr>
                    <td><strong>status</strong></td>
                    <td>1</td>
                    <td>1</td>
                    <td>çŠ¶æ€ (1=æ´»è·ƒ, 0=éæ´»è·ƒ)</td>
                </tr>
                <tr>
                    <td><strong>column</strong></td>
                    <td>name</td>
                    <td>party</td>
                    <td>æ•°æ®åˆ—å</td>
                </tr>
                <tr>
                    <td><strong>value</strong></td>
                    <td>"john_smith"</td>
                    <td>"republican"</td>
                    <td>å®é™…çš„æ•°æ®å€¼</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="content-section" id="encoding">
        <h2>ğŸ”§ 3. ç¼–ç è¿‡ç¨‹</h2>
        
        <div class="mermaid">
            <div class="mermaid">
graph TD
    A[eh_storage_data è®°å½•] --> B[term_to_binary]
    B --> C[è®¡ç®—äºŒè¿›åˆ¶å¤§å°]
    C --> D[è®¡ç®— SHA-1 å“ˆå¸Œ]
    D --> E[ç»„è£…æœ€ç»ˆäºŒè¿›åˆ¶]
    
    E --> F[20å­—èŠ‚ SHA-1]
    E --> G[4å­—èŠ‚ å¤§å°]
    E --> H[Nå­—èŠ‚ æ•°æ®]
    
    style A fill:#e1f5fe
    style E fill:#c8e6c9
    style F fill:#ffcdd2
    style G fill:#dcedc8
    style H fill:#ffe0b2
            </div>
        </div>
        
        <h3>3.1 ç¼–ç æ­¥éª¤è¯¦è§£</h3>
        
        <div class="code-block">
% ç¬¬1æ­¥ï¼šå°† Erlang è®°å½•è½¬æ¢ä¸ºäºŒè¿›åˆ¶
Bin = term_to_binary(Entry),

% ç¬¬2æ­¥ï¼šè®¡ç®—äºŒè¿›åˆ¶æ•°æ®çš„å¤§å°
BinSize = byte_size(Bin),

% ç¬¬3æ­¥ï¼šè®¡ç®—å“ˆå¸Œå€¼ (åŒ…å«å¤§å°ä¿¡æ¯)
B1 = <<BinSize:32, Bin:BinSize/binary>>,
Sha = crypto:hash(sha, B1),

% ç¬¬4æ­¥ï¼šç»„è£…æœ€ç»ˆçš„äºŒè¿›åˆ¶æ ¼å¼
FinalBinary = <<Sha:20/binary, BinSize:32, Bin:BinSize/binary>>
        </div>
        
        <div class="warning">
            <strong>âš ï¸ é‡è¦ç»†èŠ‚ï¼š</strong>
            <ul>
                <li>SHA-1 å“ˆå¸Œè®¡ç®—æ—¶<strong>åŒ…å«äº†æ•°æ®å¤§å°</strong>ï¼Œé˜²æ­¢é•¿åº¦æ‰©å±•æ”»å‡»</li>
                <li>æ•°æ®å¤§å°ä½¿ç”¨ <strong>32ä½å¤§ç«¯åº</strong> å­˜å‚¨</li>
                <li>æœ€å¤§æ”¯æŒ <strong>4GB</strong> çš„å•æ¡è®°å½•</li>
            </ul>
        </div>
    </div>

    <div class="content-section" id="format-details">
        <h2>ğŸ“ 4. æ ¼å¼è¯¦è§£</h2>
        
        <h3>4.1 å­—èŠ‚çº§åˆ«åˆ†è§£</h3>
        
        <table class="format-table">
            <thead>
                <tr>
                    <th>ä½ç½®</th>
                    <th>å¤§å°</th>
                    <th>ç±»å‹</th>
                    <th>æè¿°</th>
                    <th>ç¤ºä¾‹å€¼</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0-19</td>
                    <td>20 å­—èŠ‚</td>
                    <td>SHA-1 å“ˆå¸Œ</td>
                    <td>æ•°æ®å®Œæ•´æ€§æ ¡éªŒç </td>
                    <td>144,64,82,140,7,212,33,199...</td>
                </tr>
                <tr>
                    <td>20-23</td>
                    <td>4 å­—èŠ‚</td>
                    <td>32ä½æ•´æ•°</td>
                    <td>åç»­æ•°æ®çš„å­—èŠ‚é•¿åº¦</td>
                    <td>0,0,0,58 (è¡¨ç¤º58å­—èŠ‚)</td>
                </tr>
                <tr>
                    <td>24-N</td>
                    <td>N å­—èŠ‚</td>
                    <td>Erlang äºŒè¿›åˆ¶</td>
                    <td>term_to_binary åºåˆ—åŒ–çš„æ•°æ®</td>
                    <td>131,104,8,100,0,15,101...</td>
                </tr>
            </tbody>
        </table>
        
        <h3>4.2 Erlang äºŒè¿›åˆ¶æ ¼å¼ (ETF)</h3>
        
        <p>åºåˆ—åŒ–æ•°æ®éƒ¨åˆ†ä½¿ç”¨ Erlang çš„ <strong>External Term Format (ETF)</strong>ï¼š</p>
        
        <div class="code-block">
131,104,8,100,0,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,
100,0,6,112,101,114,115,111,110,97,10,97,3,97,1,97,1,100,0,4,110,97,109,101,
107,0,10,106,111,104,110,95,115,109,105,116,104
        </div>
        
        <table class="format-table">
            <thead>
                <tr>
                    <th>å­—èŠ‚</th>
                    <th>å«ä¹‰</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>131</td>
                    <td>ETF ç‰ˆæœ¬æ ‡è¯†</td>
                    <td>Erlang å¤–éƒ¨æ ¼å¼ç‰ˆæœ¬å·</td>
                </tr>
                <tr>
                    <td>104,8</td>
                    <td>å…ƒç»„æ ‡è¯† + å…ƒç´ æ•°é‡</td>
                    <td>8å…ƒç´ çš„å…ƒç»„ (è®°å½•)</td>
                </tr>
                <tr>
                    <td>100,0,15,...</td>
                    <td>åŸå­æ ‡è¯† + é•¿åº¦ + å†…å®¹</td>
                    <td>åŸå­ 'eh_storage_data'</td>
                </tr>
                <tr>
                    <td>97,10</td>
                    <td>å°æ•´æ•°æ ‡è¯† + å€¼</td>
                    <td>æ•´æ•° 10</td>
                </tr>
                <tr>
                    <td>107,0,10,...</td>
                    <td>å­—ç¬¦ä¸²æ ‡è¯† + é•¿åº¦ + å†…å®¹</td>
                    <td>å­—ç¬¦ä¸² "john_smith"</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="content-section" id="examples">
        <h2>ğŸ’¡ 5. å®é™…ç¤ºä¾‹åˆ†æ</h2>
        
        <h3>5.1 ç¤ºä¾‹ 1ï¼šperson è®°å½•</h3>
        
        <div class="example-box">
            <strong>åŸå§‹æ•°æ®ï¼š</strong><br>
            {eh_storage_data, person, 10, 3, 1, 1, name, "john_smith"}
        </div>
        
        <div class="code-block">
å®Œæ•´äºŒè¿›åˆ¶è¾“å‡ºï¼š
<<144,64,82,140,7,212,33,199,89,185,3,80,182,76,132,75,137,219,138,215,0,0,0,
  58,131,104,8,100,0,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,
  100,0,6,112,101,114,115,111,110,97,10,97,3,97,1,97,1,100,0,4,110,97,109,101,
  107,0,10,106,111,104,110,95,115,109,105,116,104>>
        </div>
        
        <div class="byte-breakdown">
            <div class="byte-section sha">
                <strong>SHA-1 å“ˆå¸Œ</strong><br>
                144,64,82,140,7,212,33,199,89,185,3,80,182,76,132,75,137,219,138,215<br>
                <small>20 å­—èŠ‚</small>
            </div>
            <div class="byte-section size">
                <strong>æ•°æ®å¤§å°</strong><br>
                0,0,0,58<br>
                <small>58 å­—èŠ‚</small>
            </div>
            <div class="byte-section data">
                <strong>ETF æ•°æ®</strong><br>
                131,104,8,100,0,15...<br>
                <small>58 å­—èŠ‚</small>
            </div>
        </div>
        
        <h3>5.2 ç¤ºä¾‹ 2ï¼šcandidate è®°å½•</h3>
        
        <div class="example-box">
            <strong>åŸå§‹æ•°æ®ï¼š</strong><br>
            {eh_storage_data, candidate, 80, 8, 1, 1, name, "chris_christie"}
        </div>
        
        <div class="code-block">
å®Œæ•´äºŒè¿›åˆ¶è¾“å‡ºï¼š
<<129,6,124,227,60,11,6,8,95,40,163,44,38,110,200,65,198,186,212,113,0,0,0,65,
  131,104,8,100,0,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,
  100,0,9,99,97,110,100,105,100,97,116,101,97,80,97,8,97,1,97,1,100,0,4,110,97,
  109,101,107,0,13,99,104,114,105,115,95,99,104,114,105,115,116,105,101>>
        </div>
        
        <table class="format-table">
            <thead>
                <tr>
                    <th>å­—æ®µ</th>
                    <th>ç¤ºä¾‹1 (person)</th>
                    <th>ç¤ºä¾‹2 (candidate)</th>
                    <th>å·®å¼‚è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>SHA-1</td>
                    <td>144,64,82,140...</td>
                    <td>129,6,124,227...</td>
                    <td>ä¸åŒæ•°æ®äº§ç”Ÿä¸åŒå“ˆå¸Œ</td>
                </tr>
                <tr>
                    <td>æ•°æ®å¤§å°</td>
                    <td>58 å­—èŠ‚</td>
                    <td>65 å­—èŠ‚</td>
                    <td>æ›´é•¿çš„å­—ç¬¦ä¸²å¯¼è‡´æ›´å¤§çš„æ•°æ®</td>
                </tr>
                <tr>
                    <td>å¯¹è±¡ç±»å‹</td>
                    <td>person</td>
                    <td>candidate</td>
                    <td>ä¸åŒçš„åŸå­å€¼</td>
                </tr>
                <tr>
                    <td>å­—ç¬¦ä¸²å€¼</td>
                    <td>"john_smith" (10å­—ç¬¦)</td>
                    <td>"chris_christie" (13å­—ç¬¦)</td>
                    <td>å­—ç¬¦ä¸²é•¿åº¦å½±å“æ€»å¤§å°</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="content-section" id="decoding">
        <h2>ğŸ” 6. è§£ç è¿‡ç¨‹</h2>
        
        <div class="mermaid">
            <div class="mermaid">
graph TD
    A[è¯»å–äºŒè¿›åˆ¶æ•°æ®] --> B[æå– SHA-1 å“ˆå¸Œ<br/>å‰20å­—èŠ‚]
    B --> C[æå–æ•°æ®å¤§å°<br/>ç¬¬21-24å­—èŠ‚]
    C --> D[æå–åºåˆ—åŒ–æ•°æ®<br/>å‰©ä½™Nå­—èŠ‚]
    D --> E[éªŒè¯å“ˆå¸Œå€¼]
    E --> F{å“ˆå¸ŒåŒ¹é…?}
    F -->|æ˜¯| G[binary_to_term ååºåˆ—åŒ–]
    F -->|å¦| H[è¿”å›é”™è¯¯ eh_bad_data]
    G --> I[è¿”å› eh_storage_data è®°å½•]
    
    style A fill:#e1f5fe
    style E fill:#fff3e0
    style F fill:#ffecb3
    style G fill:#c8e6c9
    style H fill:#ffcdd2
    style I fill:#c8e6c9
            </div>
        </div>
        
        <h3>6.1 è§£ç æ­¥éª¤</h3>
        
        <div class="code-block">
% ç¬¬1æ­¥ï¼šè§£æå¤´éƒ¨ä¿¡æ¯
<<Sha:20/binary, BinSize:32>> = HeaderData,

% ç¬¬2æ­¥ï¼šè¯»å–æŒ‡å®šå¤§å°çš„æ•°æ®
{ok, _, RData} = read_data(File, Location, BinSize),

% ç¬¬3æ­¥ï¼šéªŒè¯å“ˆå¸Œå€¼
ComputedSha = crypto:hash(sha, <<BinSize:32, RData:BinSize/binary>>),
case ComputedSha of
    Sha -> 
        % ç¬¬4æ­¥ï¼šååºåˆ—åŒ–æ•°æ®
        {ok, binary_to_term(RData)};
    _Other -> 
        eh_bad_data
end
        </div>
        
        <div class="success">
            <strong>âœ… å®‰å…¨ç‰¹æ€§ï¼š</strong>
            <ul>
                <li><strong>å®Œæ•´æ€§éªŒè¯</strong>ï¼šä»»ä½•æ•°æ®æŸåéƒ½ä¼šè¢«æ£€æµ‹åˆ°</li>
                <li><strong>é•¿åº¦éªŒè¯</strong>ï¼šé˜²æ­¢ç¼“å†²åŒºæº¢å‡ºæ”»å‡»</li>
                <li><strong>æ ¼å¼éªŒè¯</strong>ï¼šETF æ ¼å¼è‡ªå¸¦ç±»å‹å®‰å…¨</li>
            </ul>
        </div>
    </div>

    <div class="content-section" id="performance">
        <h2>âš¡ 7. æ€§èƒ½è€ƒè™‘</h2>
        
        <h3>7.1 å­˜å‚¨æ•ˆç‡</h3>
        
        <table class="format-table">
            <thead>
                <tr>
                    <th>ç»„ä»¶</th>
                    <th>å¤§å°</th>
                    <th>å¼€é”€</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>SHA-1 å“ˆå¸Œ</td>
                    <td>20 å­—èŠ‚</td>
                    <td>å›ºå®š</td>
                    <td>æ¯æ¡è®°å½•å›ºå®šå¼€é”€</td>
                </tr>
                <tr>
                    <td>æ•°æ®å¤§å°</td>
                    <td>4 å­—èŠ‚</td>
                    <td>å›ºå®š</td>
                    <td>æ”¯æŒæœ€å¤§ 4GB è®°å½•</td>
                </tr>
                <tr>
                    <td>ETF å¼€é”€</td>
                    <td>~10-20%</td>
                    <td>å¯å˜</td>
                    <td>ç›¸æ¯”åŸå§‹æ•°æ®çš„å¼€é”€</td>
                </tr>
                <tr>
                    <td>æ€»å¼€é”€</td>
                    <td>24 + ETF</td>
                    <td>~30-40 å­—èŠ‚</td>
                    <td>å…¸å‹å°è®°å½•çš„å¼€é”€</td>
                </tr>
            </tbody>
        </table>
        
        <h3>7.2 æ€§èƒ½ä¼˜åŒ–</h3>
        
        <div class="highlight">
            <strong>ğŸš€ ä¼˜åŒ–ç­–ç•¥ï¼š</strong>
            <ul>
                <li><strong>æ‰¹é‡å†™å…¥</strong>ï¼šä½¿ç”¨é˜Ÿåˆ—æ‰¹é‡å¤„ç†å¤šä¸ªè®°å½•</li>
                <li><strong>é¢„åˆ†é…</strong>ï¼šé¢„å…ˆåˆ†é…äºŒè¿›åˆ¶ç¼“å†²åŒº</li>
                <li><strong>å“ˆå¸Œç¼“å­˜</strong>ï¼šå¯¹ç›¸åŒæ•°æ®ç¼“å­˜å“ˆå¸Œå€¼</li>
                <li><strong>å‹ç¼©</strong>ï¼šå¯é€‰æ‹©æ€§åœ°å‹ç¼©å¤§å‹è®°å½•</li>
            </ul>
        </div>
        
        <h3>7.3 è¯»å†™æ€§èƒ½</h3>
        
        <div class="code-block">
% å†™å…¥æ€§èƒ½ (æ¯æ¡è®°å½•)
- term_to_binary:     ~1-5 Î¼s
- SHA-1 è®¡ç®—:         ~2-10 Î¼s  
- æ–‡ä»¶å†™å…¥:           ~10-100 Î¼s
- æ€»è®¡:               ~15-115 Î¼s

% è¯»å–æ€§èƒ½ (æ¯æ¡è®°å½•)  
- æ–‡ä»¶è¯»å–:           ~5-50 Î¼s
- SHA-1 éªŒè¯:         ~2-10 Î¼s
- binary_to_term:     ~1-5 Î¼s
- æ€»è®¡:               ~8-65 Î¼s
        </div>
        
        <div class="warning">
            <strong>âš ï¸ æ€§èƒ½ç“¶é¢ˆï¼š</strong>
            <ul>
                <li><strong>ç£ç›˜ I/O</strong>ï¼šé€šå¸¸æ˜¯æœ€å¤§çš„æ€§èƒ½ç“¶é¢ˆ</li>
                <li><strong>SHA-1 è®¡ç®—</strong>ï¼šCPU å¯†é›†å‹æ“ä½œ</li>
                <li><strong>åºåˆ—åŒ–å¼€é”€</strong>ï¼šå¤æ‚æ•°æ®ç»“æ„çš„è½¬æ¢æˆæœ¬</li>
            </ul>
        </div>
    </div>

    <div class="content-section">
        <h2>ğŸ“‹ æ€»ç»“</h2>
        
        <p>Erlang CRAQ çš„äºŒè¿›åˆ¶æ ¼å¼è®¾è®¡ä½“ç°äº†ä»¥ä¸‹æ ¸å¿ƒç†å¿µï¼š</p>
        
        <div class="highlight">
            <strong>ğŸ¯ è®¾è®¡ç›®æ ‡ï¼š</strong>
            <ul>
                <li><strong>æ•°æ®å®Œæ•´æ€§</strong>ï¼šSHA-1 å“ˆå¸Œç¡®ä¿æ•°æ®æœªè¢«ç¯¡æ”¹</li>
                <li><strong>è‡ªæè¿°æ€§</strong>ï¼šåŒ…å«é•¿åº¦ä¿¡æ¯ï¼Œä¾¿äºè§£æå’ŒéªŒè¯</li>
                <li><strong>Erlang å…¼å®¹</strong>ï¼šä½¿ç”¨åŸç”Ÿçš„åºåˆ—åŒ–æœºåˆ¶</li>
                <li><strong>æ€§èƒ½å¹³è¡¡</strong>ï¼šåœ¨å®‰å…¨æ€§å’Œæ€§èƒ½ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹</li>
            </ul>
        </div>
        
        <p>è¿™ç§æ ¼å¼ç‰¹åˆ«é€‚åˆ CRAQ ç³»ç»Ÿçš„éœ€æ±‚ï¼šé«˜å¯é æ€§çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œéœ€è¦ç¡®ä¿æ•°æ®åœ¨ç½‘ç»œä¼ è¾“å’Œç£ç›˜å­˜å‚¨è¿‡ç¨‹ä¸­çš„å®Œæ•´æ€§ã€‚</p>
        
        <div class="success">
            <strong>âœ… å…³é”®ä¼˜åŠ¿ï¼š</strong>
            <ul>
                <li>å¼ºæ•°æ®å®Œæ•´æ€§ä¿è¯</li>
                <li>é«˜æ•ˆçš„åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
                <li>è‰¯å¥½çš„é”™è¯¯æ£€æµ‹èƒ½åŠ›</li>
                <li>ä¸ Erlang ç”Ÿæ€ç³»ç»Ÿå®Œç¾é›†æˆ</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({startOnLoad:true});
        
        // æ·»åŠ å¤åˆ¶ä»£ç åŠŸèƒ½
        document.querySelectorAll('.code-block').forEach(block => {
            block.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent);
                block.style.backgroundColor = '#2d5016';
                setTimeout(() => {
                    block.style.backgroundColor = '#2d3748';
                }, 200);
            });
        });
    </script>
</body>
</html>