<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAQ åˆ é™¤æ“ä½œ Trace åˆ†ææŠ¥å‘Š</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 40px;
        }
        .section {
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .section h3 {
            color: #34495e;
            margin-top: 25px;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #e74c3c;
        }
        .highlight {
            background: linear-gradient(120deg, #ffeaa7 0%, #fab1a0 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #e17055;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #e9ecef;
        }
        .node-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .timeline {
            background: #f1f2f6;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .timeline-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-left: 4px solid #e74c3c;
            border-radius: 4px;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
        }
        .function-call {
            background: #ffeaa7;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: monospace;
            border-left: 3px solid #e17055;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .delete-type {
            background: #f8d7da;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #dc3545;
        }
        .data-structure {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—‘ï¸ CRAQ åˆ é™¤æ“ä½œ Trace åˆ†æ</h1>
            <p>æ·±åº¦è§£æCRAQåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿçš„åˆ é™¤æœºåˆ¶ä¸æ•°æ®è½¯åˆ é™¤æµç¨‹</p>
        </div>
        
        <div class="content">
            <!-- æ¦‚è§ˆç»Ÿè®¡ -->
            <div class="section">
                <h2>ğŸ“Š åˆ é™¤æ“ä½œæ¦‚è§ˆ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">2</span>
                        <div>åˆ é™¤æ“ä½œåºåˆ—</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <div>å‚ä¸èŠ‚ç‚¹</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">~8s</span>
                        <div>æ“ä½œé—´éš”æ—¶é—´</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">è½¯åˆ é™¤</span>
                        <div>åˆ é™¤ç­–ç•¥</div>
                    </div>
                </div>

                <div class="highlight">
                    <h3>ğŸ¯ åˆ é™¤åœºæ™¯åˆ†æ</h3>
                    <p>åŸºäº run_app.erl çš„åˆ é™¤æ“ä½œåºåˆ—ï¼š</p>
                    <ol>
                        <li><strong>å­—æ®µåˆ é™¤</strong>: `erlang_craq:delete(N1, person, 10, [gender])` - åˆ é™¤genderå­—æ®µ</li>
                        <li><strong>å¯¹è±¡åˆ é™¤</strong>: `erlang_craq:delete(N1, person, 10)` - åˆ é™¤æ•´ä¸ªperson/10å¯¹è±¡</li>
                    </ol>
                    <p>ä¸¤ç§åˆ é™¤æ¨¡å¼å±•ç¤ºäº†CRAQç³»ç»Ÿçš„çµæ´»åˆ é™¤ç­–ç•¥ï¼šå­—æ®µçº§åˆ é™¤å’Œå¯¹è±¡çº§åˆ é™¤ã€‚</p>
                </div>
            </div>

            <!-- CRAQåˆ é™¤åè®®åˆ†æ -->
            <div class="section">
                <h2>ğŸ”— CRAQ åˆ é™¤åè®®æœºåˆ¶</h2>
                
                <div class="flow-diagram">
                    <h3>ğŸ“‹ åˆ é™¤æµç¨‹æ¶æ„å›¾</h3>
                    <div class="code-block">
<strong>CRAQ åˆ é™¤åè®®æµç¨‹:</strong>

å®¢æˆ·ç«¯åˆ é™¤è¯·æ±‚ â†’ HEADèŠ‚ç‚¹ â†’ è½¬æ¢ä¸ºæ›´æ–°æ“ä½œ â†’ Chain Replication
     â†“              â†“            â†“              â†“
erlang_craq:delete eh_update   STATUS_INACTIVE  pred_pre_update
     â†“              â†“            â†“              â†“
 åˆ é™¤å‚æ•°è§£æ      ç³»ç»ŸæœåŠ¡å™¨     è½¯åˆ é™¤æ ‡è®°      é“¾å¼ä¼ æ’­
     â†“              â†“            â†“              â†“
combine_columns   handle_cast   {field,0}      æ¶ˆæ¯éªŒè¯
     â†“              â†“            â†“              â†“
å­—æ®µçŠ¶æ€è®¾ç½®      æ—¶é—´æˆ³æ›´æ–°     æŒä¹…åŒ–å­˜å‚¨      åå‘ç¡®è®¤
     â†“              â†“            â†“              â†“
[{gender,0}]     timestamp=5/6  æ•°æ®æ ‡è®°       å®¢æˆ·ç«¯å“åº”
                    </div>
                </div>

                <div class="node-info">
                    <h4>ğŸ—ï¸ åˆ é™¤æ“ä½œç±»å‹</h4>
                    <ul>
                        <li><strong>å­—æ®µåˆ é™¤</strong>: delete(Node, ObjectType, ObjectId, [Field]) â†’ {field, 0}</li>
                        <li><strong>å¯¹è±¡åˆ é™¤</strong>: delete(Node, ObjectType, ObjectId) â†’ STATUS_INACTIVE</li>
                        <li><strong>æ‰¹é‡åˆ é™¤</strong>: delete(Node, DeleteList) â†’ å¤šå¯¹è±¡åˆ é™¤</li>
                        <li><strong>è½¯åˆ é™¤æœºåˆ¶</strong>: é€šè¿‡çŠ¶æ€æ ‡è®°å®ç°ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®</li>
                    </ul>
                </div>
            </div>

            <!-- åˆ é™¤APIåˆ†æ -->
            <div class="section">
                <h2>âš™ï¸ åˆ é™¤APIå®ç°åˆ†æ</h2>
                
                <h3>ğŸ”„ erlang_craq.erl åˆ é™¤å‡½æ•°</h3>
                
                <div class="delete-type">
                    <h4>1. å­—æ®µåˆ é™¤ - delete/4</h4>
                    <div class="function-call">delete(Node, ObjectType, ObjectId, DeleteColumns) -> update(Node, ObjectType, ObjectId, [], DeleteColumns)</div>
                    <p>å°†å­—æ®µåˆ é™¤è½¬æ¢ä¸ºæ›´æ–°æ“ä½œï¼ŒDeleteColumnsä¸­çš„å­—æ®µæ ‡è®°ä¸ºSTATUS_INACTIVE (0)</p>
                </div>
                
                <div class="delete-type">
                    <h4>2. å¯¹è±¡åˆ é™¤ - delete/3</h4>
                    <div class="function-call">delete(Node, ObjectType, ObjectId) -> send_update(Node, [{ObjectType, ObjectId, ?STATUS_INACTIVE}])</div>
                    <p>æ•´ä¸ªå¯¹è±¡æ ‡è®°ä¸ºSTATUS_INACTIVEï¼Œå®ç°å¯¹è±¡çº§è½¯åˆ é™¤</p>
                </div>
                
                <div class="delete-type">
                    <h4>3. æ‰¹é‡åˆ é™¤ - delete/2</h4>
                    <div class="function-call">delete(Node, DeleteList) -> send_update(Node, get_delete_list(DeleteList, []))</div>
                    <p>æ”¯æŒå¤šä¸ªå¯¹è±¡çš„æ‰¹é‡åˆ é™¤æ“ä½œ</p>
                </div>

                <h3>ğŸ”§ æ ¸å¿ƒè½¬æ¢å‡½æ•°</h3>
                
                <div class="code-block">
<strong>åˆ é™¤åˆ°æ›´æ–°çš„è½¬æ¢é€»è¾‘:</strong>

combine_columns(UpdateColumns, DeleteColumns):
â”œâ”€â”€ get_columns(UpdateColumns) â†’ [{Column, STATUS_ACTIVE, Value}]
â””â”€â”€ get_columns(DeleteColumns) â†’ [{Column, STATUS_INACTIVE}]

get_columnså¤„ç†:
â”œâ”€â”€ {Column, Value} â†’ {Column, STATUS_ACTIVE, Value}    # æ›´æ–°å­—æ®µ
â””â”€â”€ Column â†’ {Column, STATUS_INACTIVE}                  # åˆ é™¤å­—æ®µ

æœ€ç»ˆç»“æœ:
â”œâ”€â”€ å­—æ®µåˆ é™¤: [{gender, 0}] â†’ genderå­—æ®µæ ‡è®°ä¸ºåˆ é™¤
â””â”€â”€ å¯¹è±¡åˆ é™¤: STATUS_INACTIVE â†’ æ•´ä¸ªå¯¹è±¡æ ‡è®°ä¸ºåˆ é™¤
                </div>
            </div>

            <!-- å…³é”®å‡½æ•°è°ƒç”¨åˆ†æ -->
            <div class="section">
                <h2>âš™ï¸ å…³é”®å‡½æ•°è°ƒç”¨åºåˆ—åˆ†æ</h2>
                
                <h3>ğŸ”„ ç¬¬ä¸€æ¬¡åˆ é™¤ - å­—æ®µåˆ é™¤ (timestamp=5)</h3>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>1. å®¢æˆ·ç«¯åˆ é™¤è¯·æ±‚</strong>
                        <div class="function-call">erlang_craq:delete(N1, person, 10, [gender])</div>
                        <p>åˆ é™¤person/10å¯¹è±¡çš„genderå­—æ®µ</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>2. è½¬æ¢ä¸ºæ›´æ–°æ“ä½œ</strong>
                        <div class="function-call">update(Node, person, 10, [], [gender]) â†’ [{gender, 0}]</div>
                        <p>å­—æ®µåˆ é™¤è½¬æ¢ä¸ºæ›´æ–°æ“ä½œï¼Œgenderå­—æ®µæ ‡è®°ä¸ºSTATUS_INACTIVE (0)</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>3. ç³»ç»ŸæœåŠ¡å™¨å¤„ç†</strong>
                        <div class="function-call">eh_system_server:handle_cast({eh_update, ...})</div>
                        <p>HEADèŠ‚ç‚¹æ¥æ”¶æ›´æ–°è¯·æ±‚ï¼ŒåŒ…å«åˆ é™¤æ ‡è®°</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>4. æ—¶é—´æˆ³æ›´æ–°</strong>
                        <div class="function-call">eh_node_timestamp:update_state_timestamp(5, ...)</div>
                        <p>é€»è¾‘æ—¶é’Ÿä»4æ›´æ–°åˆ°5</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>5. é“¾å¼ä¼ æ’­</strong>
                        <div class="function-call">eh_system_server:process_msg(eh_pred_pre_update, ...)</div>
                        <p>æ²¿CRAQé“¾ä¼ æ’­åˆ é™¤æ“ä½œ: Node1 â†’ Node2 â†’ Node3</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>6. æ•°æ®æŒä¹…åŒ–</strong>
                        <div class="function-call">eh_persist_data:persist_data/2</div>
                        <p>åœ¨TAILèŠ‚ç‚¹æ‰§è¡Œå®é™…çš„è½¯åˆ é™¤æ ‡è®°</p>
                    </div>
                </div>

                <h3>ğŸ”„ ç¬¬äºŒæ¬¡åˆ é™¤ - å¯¹è±¡åˆ é™¤ (timestamp=6)</h3>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>1. å¯¹è±¡åˆ é™¤è¯·æ±‚</strong>
                        <div class="function-call">erlang_craq:delete(N1, person, 10)</div>
                        <p>åˆ é™¤æ•´ä¸ªperson/10å¯¹è±¡</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>2. å¯¹è±¡çº§åˆ é™¤</strong>
                        <div class="function-call">send_update(Node, [{person, 10, STATUS_INACTIVE}])</div>
                        <p>æ•´ä¸ªå¯¹è±¡æ ‡è®°ä¸ºSTATUS_INACTIVE</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>3. æ—¶é—´æˆ³é€’å¢</strong>
                        <div class="function-call">eh_node_timestamp:update_state_timestamp(6, ...)</div>
                        <p>é€»è¾‘æ—¶é’Ÿä»5æ›´æ–°åˆ°6</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>4. é“¾å¼ç¡®è®¤</strong>
                        <div class="function-call">eh_system_server:process_msg(eh_succ_update, ...)</div>
                        <p>åå‘ç¡®è®¤é“¾: Node3 â†’ Node2 â†’ Node1</p>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®çŠ¶æ€å˜åŒ–åˆ†æ -->
            <div class="section">
                <h2>ğŸ’¾ æ•°æ®çŠ¶æ€å˜åŒ–åˆ†æ</h2>
                
                <h3>ğŸ” åˆ é™¤å‰åæ•°æ®å¯¹æ¯”</h3>
                
                <div class="data-structure">
                    <h4>ğŸ“ åˆ é™¤æ“ä½œçš„æ•°æ®å˜åŒ–</h4>
                    <div class="code-block">
<strong>åˆ é™¤å‰çŠ¶æ€ (timestamp=4):</strong>
person/10: {
    name: "john_smith",
    age: 40,
    gender: "male"
}

<strong>ç¬¬ä¸€æ¬¡åˆ é™¤å (timestamp=5):</strong>
person/10: {
    name: "john_smith", 
    age: 40,
    gender: DELETED  // {gender, 0} æ ‡è®°ä¸ºåˆ é™¤
}

<strong>ç¬¬äºŒæ¬¡åˆ é™¤å (timestamp=6):</strong>
person/10: DELETED  // æ•´ä¸ªå¯¹è±¡æ ‡è®°ä¸ºSTATUS_INACTIVE
                    </div>
                </div>

                <div class="highlight">
                    <h4>ğŸ“Š å­˜å‚¨å±‚æ•°æ®ç»“æ„</h4>
                    <p>CRAQä½¿ç”¨è½¯åˆ é™¤æœºåˆ¶ï¼Œåˆ é™¤çš„æ•°æ®ä»ç„¶ä¿ç•™åœ¨å­˜å‚¨ä¸­ï¼š</p>
                    <ul>
                        <li><strong>å­—æ®µåˆ é™¤</strong>: `{eh_storage_value, 5, field_id, 0, gender, undefined}`</li>
                        <li><strong>å¯¹è±¡åˆ é™¤</strong>: `{eh_storage_data, 6, 1, 0, undefined, undefined}`</li>
                        <li><strong>å†å²ä¿ç•™</strong>: æ‰€æœ‰å†å²ç‰ˆæœ¬çš„æ•°æ®éƒ½è¢«ä¿ç•™</li>
                        <li><strong>æŸ¥è¯¢è¿‡æ»¤</strong>: æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤STATUS_INACTIVEçš„æ•°æ®</li>
                    </ul>
                </div>
            </div>

            <!-- æ—¶é—´åºåˆ—åˆ†æ -->
            <div class="section">
                <h2>â° åˆ é™¤æ“ä½œæ—¶é—´åºåˆ—åˆ†æ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">4:39:42.841778</span>
                        <div>ç¬¬1æ¬¡åˆ é™¤å¼€å§‹</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4:39:50.691732</span>
                        <div>ç¬¬2æ¬¡åˆ é™¤å¼€å§‹</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">7.85s</span>
                        <div>æ“ä½œé—´éš”æ—¶é—´</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">~30ms</span>
                        <div>å•æ¬¡åˆ é™¤å»¶è¿Ÿ</div>
                    </div>
                </div>

                <h3>ğŸ“ˆ æ€§èƒ½ç‰¹å¾åˆ†æ</h3>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>åˆ é™¤æ“ä½œå»¶è¿Ÿ</strong>
                        <p>å­—æ®µåˆ é™¤: ~30ms (åŒ…å«é“¾ä¼ æ’­å’ŒæŒä¹…åŒ–)</p>
                        <p>å¯¹è±¡åˆ é™¤: ~25ms (ç›¸ä¼¼çš„å¤„ç†æ—¶é—´)</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>èŠ‚ç‚¹é—´ä¼ æ’­</strong>
                        <p>Node1 â†’ Node2: ~80ms å»¶è¿Ÿ</p>
                        <p>Node2 â†’ Node3: ~120ms å»¶è¿Ÿ</p>
                        <p>æ€»ä¼ æ’­æ—¶é—´: ~200ms</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>æŒä¹…åŒ–æ€§èƒ½</strong>
                        <p>æ•°æ®æ£€æŸ¥: eh_repl_data_manager_api:check_data/1</p>
                        <p>å­˜å‚¨æ›´æ–°: eh_data_serverå¤„ç†</p>
                        <p>æ–‡ä»¶å†™å…¥: å¼‚æ­¥æŒä¹…åŒ–åˆ°ç£ç›˜</p>
                    </div>
                </div>
            </div>

            <!-- è½¯åˆ é™¤æœºåˆ¶åˆ†æ -->
            <div class="section">
                <h2>ğŸ”„ è½¯åˆ é™¤æœºåˆ¶æ·±åº¦åˆ†æ</h2>
                
                <h3>ğŸ¯ STATUS_INACTIVE æ ‡è®°ç³»ç»Ÿ</h3>
                
                <div class="code-block">
<strong>è½¯åˆ é™¤å®ç°æœºåˆ¶:</strong>

å¸¸é‡å®šä¹‰:
â”œâ”€â”€ STATUS_INACTIVE = 0  // åˆ é™¤çŠ¶æ€
â””â”€â”€ STATUS_ACTIVE = 1    // æ´»è·ƒçŠ¶æ€

å­—æ®µçº§åˆ é™¤:
â”œâ”€â”€ {Column, STATUS_INACTIVE} â†’ {gender, 0}
â””â”€â”€ å­—æ®µæ ‡è®°ä¸ºåˆ é™¤ï¼Œä½†ä¿ç•™å†å²æ•°æ®

å¯¹è±¡çº§åˆ é™¤:
â”œâ”€â”€ {ObjectType, ObjectId, STATUS_INACTIVE}
â””â”€â”€ æ•´ä¸ªå¯¹è±¡æ ‡è®°ä¸ºåˆ é™¤

æŸ¥è¯¢æ—¶è¿‡æ»¤:
â”œâ”€â”€ eh_data_util:query_fun/3 æ£€æŸ¥statuså­—æ®µ
â””â”€â”€ è‡ªåŠ¨è¿‡æ»¤STATUS_INACTIVEçš„æ•°æ®
                </div>

                <div class="warning">
                    <h4>âš ï¸ è½¯åˆ é™¤çš„ä¼˜åŠ¿ä¸è€ƒè™‘</h4>
                    <ul>
                        <li><strong>æ•°æ®æ¢å¤</strong>: åˆ é™¤çš„æ•°æ®å¯ä»¥é€šè¿‡ä¿®æ”¹çŠ¶æ€æ ‡è®°æ¢å¤</li>
                        <li><strong>å®¡è®¡è¿½è¸ª</strong>: å®Œæ•´ä¿ç•™æ•°æ®å˜æ›´å†å²</li>
                        <li><strong>ä¸€è‡´æ€§ä¿è¯</strong>: åˆ é™¤æ“ä½œé€šè¿‡CRAQé“¾ç¡®ä¿ä¸€è‡´æ€§</li>
                        <li><strong>å­˜å‚¨å¼€é”€</strong>: éœ€è¦é¢å¤–å­˜å‚¨ç©ºé—´ä¿å­˜åˆ é™¤æ ‡è®°</li>
                    </ul>
                </div>
            </div>

            <!-- æ€»ç»“ä¸æ´å¯Ÿ -->
            <div class="section">
                <h2>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿä¸æ€»ç»“</h2>
                
                <div class="success">
                    <h3>âœ… CRAQåˆ é™¤åè®®ä¼˜åŠ¿</h3>
                    <ul>
                        <li><strong>ç»Ÿä¸€æ“ä½œæ¨¡å‹</strong>: åˆ é™¤æ“ä½œè½¬æ¢ä¸ºæ›´æ–°æ“ä½œï¼Œå¤ç”¨CRAQæ›´æ–°åè®®</li>
                        <li><strong>çµæ´»åˆ é™¤ç²’åº¦</strong>: æ”¯æŒå­—æ®µçº§å’Œå¯¹è±¡çº§åˆ é™¤</li>
                        <li><strong>å¼ºä¸€è‡´æ€§ä¿è¯</strong>: é€šè¿‡é“¾å¼å¤åˆ¶ç¡®ä¿åˆ é™¤æ“ä½œçš„ä¸€è‡´æ€§</li>
                        <li><strong>æ•°æ®å®‰å…¨æ€§</strong>: è½¯åˆ é™¤æœºåˆ¶é¿å…æ•°æ®æ„å¤–ä¸¢å¤±</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>ğŸ”¬ æŠ€æœ¯ç‰¹ç‚¹</h3>
                    <ul>
                        <li><strong>æ“ä½œè½¬æ¢</strong>: åˆ é™¤æ“ä½œå·§å¦™è½¬æ¢ä¸ºå¸¦çŠ¶æ€æ ‡è®°çš„æ›´æ–°æ“ä½œ</li>
                        <li><strong>ç‰ˆæœ¬åŒ–åˆ é™¤</strong>: æ¯æ¬¡åˆ é™¤æ“ä½œéƒ½æœ‰ç‹¬ç«‹çš„æ—¶é—´æˆ³</li>
                        <li><strong>æ¸è¿›å¼åˆ é™¤</strong>: æ”¯æŒå…ˆåˆ é™¤å­—æ®µï¼Œå†åˆ é™¤å¯¹è±¡çš„æ¸è¿›å¼æ“ä½œ</li>
                        <li><strong>æŸ¥è¯¢é€æ˜</strong>: æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤æ•°æ®ï¼Œå¯¹åº”ç”¨é€æ˜</li>
                    </ul>
                </div>

                <div class="code-block">
<strong>å‡½æ•°è°ƒç”¨å›¾æ€»ç»“:</strong>

å®¢æˆ·ç«¯APIå±‚:
â”œâ”€â”€ erlang_craq:delete/3 (å¯¹è±¡åˆ é™¤)
â”œâ”€â”€ erlang_craq:delete/4 (å­—æ®µåˆ é™¤)
â””â”€â”€ erlang_craq:delete/2 (æ‰¹é‡åˆ é™¤)

è½¬æ¢å¤„ç†å±‚:
â”œâ”€â”€ combine_columns/2 (å­—æ®µçŠ¶æ€è½¬æ¢)
â”œâ”€â”€ get_columns/2 (çŠ¶æ€æ ‡è®°ç”Ÿæˆ)
â””â”€â”€ send_update/2 (è½¬æ¢ä¸ºæ›´æ–°æ“ä½œ)

ç³»ç»ŸæœåŠ¡å±‚:
â”œâ”€â”€ eh_system_server:handle_cast/2
â”œâ”€â”€ eh_node_timestamp:update_state_timestamp/2
â””â”€â”€ eh_system_server:process_msg/9

æ•°æ®æŒä¹…åŒ–å±‚:
â”œâ”€â”€ eh_persist_data:persist_data/2
â”œâ”€â”€ eh_repl_data_manager_api:check_data/1
â””â”€â”€ eh_data_server:handle_call/3

çŠ¶æ€ç®¡ç†å±‚:
â”œâ”€â”€ STATUS_INACTIVE æ ‡è®°å¤„ç†
â”œâ”€â”€ eh_storage_value çŠ¶æ€æ›´æ–°
â””â”€â”€ æŸ¥è¯¢æ—¶è¿‡æ»¤æœºåˆ¶
                </div>

                <div class="node-info">
                    <h4>ğŸ¯ å…³é”®å‘ç°</h4>
                    <ul>
                        <li><strong>åˆ é™¤å³æ›´æ–°</strong>: CRAQå°†åˆ é™¤æ“ä½œç»Ÿä¸€ä¸ºå¸¦çŠ¶æ€æ ‡è®°çš„æ›´æ–°æ“ä½œ</li>
                        <li><strong>ä¸¤çº§åˆ é™¤</strong>: æ”¯æŒå­—æ®µçº§åˆ é™¤å’Œå¯¹è±¡çº§åˆ é™¤ä¸¤ç§ç²’åº¦</li>
                        <li><strong>è½¯åˆ é™¤ç­–ç•¥</strong>: é€šè¿‡STATUS_INACTIVEæ ‡è®°å®ç°è½¯åˆ é™¤</li>
                        <li><strong>ä¸€è‡´æ€§ä¿è¯</strong>: åˆ é™¤æ“ä½œåŒæ ·éµå¾ªCRAQçš„å¼ºä¸€è‡´æ€§åè®®</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>