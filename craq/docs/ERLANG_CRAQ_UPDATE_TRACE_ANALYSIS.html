<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRAQ æ›´æ–°æ“ä½œ Trace åˆ†ææŠ¥å‘Š</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .content {
            padding: 40px;
        }
        .section {
            margin-bottom: 40px;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .section h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .section h3 {
            color: #34495e;
            margin-top: 25px;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ff6b6b;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        .flow-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #e9ecef;
        }
        .node-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .timeline {
            background: #f1f2f6;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .timeline-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin-bottom: 8px;
        }
        .function-call {
            background: #e8f5e8;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: monospace;
            border-left: 3px solid #27ae60;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”„ CRAQ æ›´æ–°æ“ä½œ Trace åˆ†æ</h1>
            <p>æ·±åº¦è§£æä¸‰èŠ‚ç‚¹é›†ç¾¤çš„æ•°æ®æ›´æ–°æœºåˆ¶ä¸å‡½æ•°è°ƒç”¨æµç¨‹</p>
        </div>
        
        <div class="content">
            <!-- æ¦‚è§ˆç»Ÿè®¡ -->
            <div class="section">
                <h2>ğŸ“Š æ›´æ–°æ“ä½œæ¦‚è§ˆ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">4</span>
                        <div>æ›´æ–°æ“ä½œåºåˆ—</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">3</span>
                        <div>å‚ä¸èŠ‚ç‚¹</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">~5min</span>
                        <div>æ€»æ‰§è¡Œæ—¶é—´</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">CRAQ</span>
                        <div>Chain Replication</div>
                    </div>
                </div>

                <div class="highlight">
                    <h3>ğŸ¯ æµ‹è¯•åœºæ™¯åˆ†æ</h3>
                    <p>åŸºäº ReadMe.txt çš„æ›´æ–°æ“ä½œåºåˆ—ï¼š</p>
                    <ol>
                        <li><strong>åˆå§‹æ’å…¥</strong>: person/10 â†’ {name: john, age: 30, gender: male}</li>
                        <li><strong>éƒ¨åˆ†æ›´æ–°</strong>: person/10 â†’ {age: 40} (ä¿ç•™å…¶ä»–å­—æ®µ)</li>
                        <li><strong>å­—æ®µæ›¿æ¢</strong>: person/10 â†’ {name: john_smith}, åˆ é™¤ age å­—æ®µ</li>
                        <li><strong>æ‰¹é‡æ›´æ–°</strong>: åŒæ—¶æ›´æ–° candidate/10 å’Œ person/10</li>
                    </ol>
                </div>
            </div>

            <!-- CRAQæ›´æ–°åè®®åˆ†æ -->
            <div class="section">
                <h2>ğŸ”— CRAQ Chain Replication æ›´æ–°åè®®</h2>
                
                <div class="flow-diagram">
                    <h3>ğŸ“‹ æ›´æ–°æµç¨‹æ¶æ„å›¾</h3>
                    <div class="code-block">
<strong>CRAQ æ›´æ–°åè®®æµç¨‹:</strong>

å®¢æˆ·ç«¯è¯·æ±‚ â†’ HEADèŠ‚ç‚¹(Node1) â†’ MIDDLEèŠ‚ç‚¹(Node2) â†’ TAILèŠ‚ç‚¹(Node3)
     â†“              â†“                    â†“                   â†“
   eh_update    pred_pre_update    pred_pre_update    pred_pre_update
                     â†“                    â†“                   â†“
                 éªŒè¯æ¶ˆæ¯            éªŒè¯æ¶ˆæ¯            éªŒè¯æ¶ˆæ¯(TAIL)
                     â†“                    â†“                   â†“
                 è½¬å‘æ¶ˆæ¯            è½¬å‘æ¶ˆæ¯            æ‰§è¡Œæ›´æ–°
                     â†“                    â†“                   â†“
                 ç­‰å¾…ç¡®è®¤            ç­‰å¾…ç¡®è®¤            succ_update â†â”€â”
                     â†“                    â†“                   â†“         â”‚
                 succ_update â†â”€â”€â”€ succ_update â†â”€â”€â”€ succ_update         â”‚
                     â†“                    â†“                   â†“         â”‚
                 æŒä¹…åŒ–å­˜å‚¨          æŒä¹…åŒ–å­˜å‚¨          æŒä¹…åŒ–å­˜å‚¨      â”‚
                     â†“                    â†“                   â†“         â”‚
                 å®¢æˆ·ç«¯å“åº”          çŠ¶æ€æ›´æ–°            çŠ¶æ€æ›´æ–°       â”‚
                                                                      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åå‘ç¡®è®¤é“¾ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                </div>

                <div class="node-info">
                    <h4>ğŸ—ï¸ èŠ‚ç‚¹è§’è‰²ä¸èŒè´£</h4>
                    <ul>
                        <li><strong>HEADèŠ‚ç‚¹ (ec_n1)</strong>: æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¯åŠ¨æ›´æ–°é“¾ï¼Œæœ€ç»ˆå“åº”å®¢æˆ·ç«¯</li>
                        <li><strong>MIDDLEèŠ‚ç‚¹ (ec_n2)</strong>: ä¸­ç»§æ›´æ–°æ¶ˆæ¯ï¼Œå‚ä¸ä¸€è‡´æ€§éªŒè¯</li>
                        <li><strong>TAILèŠ‚ç‚¹ (ec_n3)</strong>: æ‰§è¡Œå®é™…æ›´æ–°ï¼Œå¯åŠ¨åå‘ç¡®è®¤é“¾</li>
                    </ul>
                </div>
            </div>

            <!-- å…³é”®å‡½æ•°è°ƒç”¨åˆ†æ -->
            <div class="section">
                <h2>âš™ï¸ å…³é”®å‡½æ•°è°ƒç”¨åºåˆ—åˆ†æ</h2>
                
                <h3>ğŸ”„ æ›´æ–°æ¶ˆæ¯å¤„ç†æµç¨‹</h3>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>1. å®¢æˆ·ç«¯è¯·æ±‚å¤„ç†</strong>
                        <div class="function-call">eh_system_server:handle_cast({eh_update, ...})</div>
                        <p>HEADèŠ‚ç‚¹æ¥æ”¶å®¢æˆ·ç«¯æ›´æ–°è¯·æ±‚ï¼ŒéªŒè¯èŠ‚ç‚¹çŠ¶æ€</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>2. æ¶ˆæ¯éªŒè¯ä¸æ—¶é—´æˆ³</strong>
                        <div class="function-call">eh_node_timestamp:valid_pre_update_msg/2</div>
                        <div class="function-call">eh_node_state:update_state_msg/1</div>
                        <p>éªŒè¯æ¶ˆæ¯æœ‰æ•ˆæ€§ï¼Œæ›´æ–°é€»è¾‘æ—¶é’Ÿï¼Œæ£€æŸ¥å†²çª</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>3. å‰å‘ä¼ æ’­ (pred_pre_update)</strong>
                        <div class="function-call">eh_system_server:send_pre_update_msg/4</div>
                        <div class="function-call">eh_system_server:send_msg(eh_pred_pre_update, ...)</div>
                        <p>æ²¿é“¾å‘åç»§èŠ‚ç‚¹ä¼ æ’­æ›´æ–°æ¶ˆæ¯</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>4. TAILèŠ‚ç‚¹æ‰§è¡Œæ›´æ–°</strong>
                        <div class="function-call">eh_system_server:send_update_msg/2</div>
                        <div class="function-call">eh_persist_data:persist_data/2</div>
                        <p>TAILèŠ‚ç‚¹æ‰§è¡Œå®é™…æ•°æ®æ›´æ–°å’ŒæŒä¹…åŒ–</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>5. åå‘ç¡®è®¤ (succ_update)</strong>
                        <div class="function-call">eh_system_server:send_msg(eh_succ_update, ...)</div>
                        <div class="function-call">eh_system_server:process_msg(eh_succ_update, ...)</div>
                        <p>ä»TAILå‘HEADä¼ æ’­ç¡®è®¤æ¶ˆæ¯</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>6. å®¢æˆ·ç«¯å“åº”</strong>
                        <div class="function-call">eh_system_server:reply_to_client/2</div>
                        <div class="function-call">eh_query_handler:reply/3</div>
                        <p>HEADèŠ‚ç‚¹å‘å®¢æˆ·ç«¯å‘é€æ›´æ–°å®Œæˆå“åº”</p>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®æŒä¹…åŒ–åˆ†æ -->
            <div class="section">
                <h2>ğŸ’¾ æ•°æ®æŒä¹…åŒ–æœºåˆ¶åˆ†æ</h2>
                
                <h3>ğŸ” eh_persist_data æ¨¡å—åŠŸèƒ½</h3>
                
                <div class="code-block">
<strong>æŒä¹…åŒ–å‡½æ•°è°ƒç”¨æ¨¡å¼:</strong>

eh_persist_data:persist_data/2:
  â”œâ”€â”€ eh_update_msg:get_data_list/1        # æå–æ›´æ–°æ•°æ®
  â”œâ”€â”€ eh_system_config:get_repl_data_manager/1  # è·å–æ•°æ®ç®¡ç†å™¨
  â”œâ”€â”€ ReplDataManager:update/3             # æ‰§è¡Œæ•°æ®æ›´æ–°
  â””â”€â”€ eh_query_handler:process_pending/2   # å¤„ç†å¾…å¤„ç†æŸ¥è¯¢

eh_persist_data:no_persist_data/2:
  â””â”€â”€ ç›´æ¥è¿”å›çŠ¶æ€ (ç”¨äºæ¶ˆæ¯ä¼ æ’­é˜¶æ®µ)
                </div>

                <div class="highlight">
                    <h4>ğŸ“ æŒä¹…åŒ–ç­–ç•¥</h4>
                    <ul>
                        <li><strong>é€‰æ‹©æ€§æŒä¹…åŒ–</strong>: åªæœ‰ç‰¹å®šé˜¶æ®µè°ƒç”¨ persist_data/2</li>
                        <li><strong>æ¶ˆæ¯ä¼ æ’­</strong>: ä½¿ç”¨ no_persist_data/2 é¿å…é‡å¤å†™å…¥</li>
                        <li><strong>æ—¶é—´æˆ³åŒæ­¥</strong>: åŸºäºé€»è¾‘æ—¶é’Ÿç¡®ä¿ä¸€è‡´æ€§</li>
                        <li><strong>æŸ¥è¯¢å¤„ç†</strong>: æ›´æ–°åç«‹å³å¤„ç†å¾…å¤„ç†çš„æŸ¥è¯¢è¯·æ±‚</li>
                    </ul>
                </div>
            </div>

            <!-- æ—¶é—´åºåˆ—åˆ†æ -->
            <div class="section">
                <h2>â° æ›´æ–°æ“ä½œæ—¶é—´åºåˆ—åˆ†æ</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">4:03:29</span>
                        <div>ç¬¬1æ¬¡æ›´æ–° (personåˆå§‹åŒ–)</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4:04:34</span>
                        <div>ç¬¬2æ¬¡æ›´æ–° (ageå­—æ®µ)</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4:05:12</span>
                        <div>ç¬¬3æ¬¡æ›´æ–° (nameå­—æ®µ)</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">4:08:28</span>
                        <div>ç¬¬4æ¬¡æ›´æ–° (æ‰¹é‡æ“ä½œ)</div>
                    </div>
                </div>

                <h3>ğŸ“ˆ æ€§èƒ½ç‰¹å¾åˆ†æ</h3>
                
                <div class="timeline">
                    <div class="timeline-item">
                        <strong>æ›´æ–°å»¶è¿Ÿæ¨¡å¼</strong>
                        <p>Node1 â†’ Node2: ~37ms å»¶è¿Ÿ</p>
                        <p>Node2 â†’ Node3: ~24ms å»¶è¿Ÿ</p>
                        <p>æ€»é“¾ä¼ æ’­æ—¶é—´: ~61ms</p>
                    </div>
                    
                    <div class="timeline-item">
                        <strong>æ¶ˆæ¯å¤„ç†æ—¶é—´</strong>
                        <p>pred_pre_update å¤„ç†: 1-3ms</p>
                        <p>succ_update å¤„ç†: 2-5ms</p>
                        <p>æŒä¹…åŒ–æ“ä½œ: 10-15ms</p>
                    </div>
                </div>
            </div>

            <!-- æ¶ˆæ¯ç±»å‹ä¸çŠ¶æ€è½¬æ¢ -->
            <div class="section">
                <h2>ğŸ“¨ æ¶ˆæ¯ç±»å‹ä¸çŠ¶æ€è½¬æ¢åˆ†æ</h2>
                
                <h3>ğŸ”„ æ¶ˆæ¯æµè½¬æ¨¡å¼</h3>
                
                <div class="code-block">
<strong>æ¶ˆæ¯ç±»å‹å®šä¹‰:</strong>

eh_update_msg_key: {timestamp, object_type, object_id}
  â”œâ”€â”€ timestamp: é€»è¾‘æ—¶é’Ÿ (1, 2, 3, 4...)
  â”œâ”€â”€ object_type: å¯¹è±¡ç±»å‹ (person, candidate)
  â””â”€â”€ object_id: å¯¹è±¡ID (10)

eh_update_msg_data: {update_data, client_id, node_id, msg_ref}
  â”œâ”€â”€ update_data: å®é™…æ›´æ–°æ•°æ® [{name,1,john}, {age,1,30}]
  â”œâ”€â”€ client_id: å®¢æˆ·ç«¯è¿›ç¨‹ID
  â”œâ”€â”€ node_id: å‘èµ·èŠ‚ç‚¹ID
  â””â”€â”€ msg_ref: æ¶ˆæ¯å¼•ç”¨ #Ref<...>
                </div>

                <div class="node-info">
                    <h4>ğŸ­ çŠ¶æ€è½¬æ¢äº‹ä»¶</h4>
                    <ul>
                        <li><strong>pred_pre_update.valid_ring_msg</strong>: ä¸­é—´èŠ‚ç‚¹éªŒè¯é€šè¿‡</li>
                        <li><strong>pred_pre_update.valid_tail_msg</strong>: TAILèŠ‚ç‚¹éªŒè¯é€šè¿‡</li>
                        <li><strong>pred_pre_update.99</strong>: å‰å‘ä¼ æ’­å®Œæˆ</li>
                        <li><strong>succ_update.99</strong>: åå‘ç¡®è®¤å®Œæˆ</li>
                    </ul>
                </div>
            </div>

            <!-- å†²çªè§£å†³æœºåˆ¶ -->
            <div class="section">
                <h2>âš”ï¸ å†™å†²çªè§£å†³æœºåˆ¶</h2>
                
                <h3>ğŸ›¡ï¸ eh_node_timestamp å†²çªæ£€æµ‹</h3>
                
                <div class="code-block">
<strong>å†²çªè§£å†³æµç¨‹:</strong>

1. æ¶ˆæ¯éªŒè¯é˜¶æ®µ:
   â”œâ”€â”€ valid_pre_update_msg/2  # æ£€æŸ¥pre_msg_dataå†²çª
   â”œâ”€â”€ valid_update_msg/2      # æ£€æŸ¥msg_dataå†²çª
   â””â”€â”€ check_data/2            # æ£€æŸ¥æ—¶é—´æˆ³å’Œæ•°æ®ä¸€è‡´æ€§

2. å†²çªè§£å†³ç­–ç•¥:
   â”œâ”€â”€ pre_update_conflict_resolver/2  # å‰å‘ä¼ æ’­å†²çª
   â”œâ”€â”€ update_conflict_resolver/2      # æ›´æ–°é˜¶æ®µå†²çª
   â””â”€â”€ resolve_conflict/5              # åŸºäºèŠ‚ç‚¹IDçš„ä»²è£

3. æ—¶é—´æˆ³ç®¡ç†:
   â”œâ”€â”€ update_state_timestamp/2        # æ›´æ–°é€»è¾‘æ—¶é’Ÿ
   â”œâ”€â”€ partition_on_timestamp_node_id/3 # æŒ‰æ—¶é—´æˆ³åˆ†åŒº
   â””â”€â”€ max(MsgTimestamp, LocalTimestamp) # æ—¶é’ŸåŒæ­¥
                </div>

                <div class="warning">
                    <h4>âš ï¸ å†²çªåœºæ™¯</h4>
                    <p>å½“å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å¯¹åŒä¸€å¯¹è±¡å‘èµ·æ›´æ–°æ—¶ï¼Œç³»ç»Ÿä½¿ç”¨èŠ‚ç‚¹IDè¿›è¡Œç¡®å®šæ€§ä»²è£ï¼Œç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹è¾¾æˆä¸€è‡´çš„æ›´æ–°é¡ºåºã€‚</p>
                </div>
            </div>

            <!-- äº‹ä»¶ç³»ç»Ÿåˆ†æ -->
            <div class="section">
                <h2>ğŸ“¡ äº‹ä»¶é€šçŸ¥ç³»ç»Ÿ</h2>
                
                <h3>ğŸ”” eh_event äº‹ä»¶å¤„ç†</h3>
                
                <div class="function-call">eh_event:event_notify(message, {eh_system_server, EventType, Data})</div>
                <div class="function-call">eh_event:event_notify(state, {eh_system_server, StateEvent, State})</div>
                
                <div class="highlight">
                    <h4>ğŸ“‹ äº‹ä»¶ç±»å‹ç»Ÿè®¡</h4>
                    <ul>
                        <li><strong>æ¶ˆæ¯äº‹ä»¶</strong>: pred_pre_update.valid_*_msg (éªŒè¯é€šè¿‡äº‹ä»¶)</li>
                        <li><strong>çŠ¶æ€äº‹ä»¶</strong>: pred_pre_update.99, succ_update.99 (é˜¶æ®µå®Œæˆäº‹ä»¶)</li>
                        <li><strong>ç›‘æ§äº‹ä»¶</strong>: ç”¨äºè°ƒè¯•å’Œæ€§èƒ½ç›‘æ§</li>
                        <li><strong>é”™è¯¯äº‹ä»¶</strong>: å†²çªè§£å†³å’Œå¼‚å¸¸å¤„ç†</li>
                    </ul>
                </div>
            </div>

            <!-- æ€»ç»“ä¸æ´å¯Ÿ -->
            <div class="section">
                <h2>ğŸ¯ æ ¸å¿ƒæ´å¯Ÿä¸æ€»ç»“</h2>
                
                <div class="success">
                    <h3>âœ… CRAQåè®®ä¼˜åŠ¿</h3>
                    <ul>
                        <li><strong>å¼ºä¸€è‡´æ€§</strong>: é€šè¿‡é“¾å¼å¤åˆ¶ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹æ•°æ®ä¸€è‡´</li>
                        <li><strong>é«˜å¯ç”¨æ€§</strong>: æ”¯æŒèŠ‚ç‚¹æ•…éšœæ—¶çš„è‡ªåŠ¨æ¢å¤</li>
                        <li><strong>è´Ÿè½½åˆ†æ•£</strong>: è¯»æ“ä½œå¯åœ¨ä»»æ„èŠ‚ç‚¹æ‰§è¡Œ</li>
                        <li><strong>ç¡®å®šæ€§å†²çªè§£å†³</strong>: åŸºäºæ—¶é—´æˆ³å’ŒèŠ‚ç‚¹IDçš„ä»²è£æœºåˆ¶</li>
                    </ul>
                </div>

                <div class="highlight">
                    <h3>ğŸ”¬ æŠ€æœ¯ç‰¹ç‚¹</h3>
                    <ul>
                        <li><strong>æ¶ˆæ¯é©±åŠ¨æ¶æ„</strong>: åŸºäºErlang/OTPçš„actoræ¨¡å‹</li>
                        <li><strong>å‡½æ•°å¼è®¾è®¡</strong>: æ— å‰¯ä½œç”¨çš„çŠ¶æ€è½¬æ¢å‡½æ•°</li>
                        <li><strong>å®¹é”™æœºåˆ¶</strong>: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤ç­–ç•¥</li>
                        <li><strong>å¯è§‚æµ‹æ€§</strong>: è¯¦ç»†çš„äº‹ä»¶æ—¥å¿—å’ŒçŠ¶æ€è·Ÿè¸ª</li>
                    </ul>
                </div>

                <div class="code-block">
<strong>å‡½æ•°è°ƒç”¨å›¾æ€»ç»“:</strong>

å®¢æˆ·ç«¯APIå±‚:
â””â”€â”€ erlang_craq:update/4

ç³»ç»ŸæœåŠ¡å±‚:
â”œâ”€â”€ eh_system_server:handle_cast/2
â”œâ”€â”€ eh_system_server:process_msg/9
â””â”€â”€ eh_system_server:send_msg/4

æ¶ˆæ¯å¤„ç†å±‚:
â”œâ”€â”€ eh_node_timestamp:valid_*_msg/2
â”œâ”€â”€ eh_update_msg:get_data_list/1
â””â”€â”€ eh_node_state:update_state_*/2

æŒä¹…åŒ–å±‚:
â”œâ”€â”€ eh_persist_data:persist_data/2
â”œâ”€â”€ eh_repl_data_manager_api:update/3
â””â”€â”€ eh_storage_data_operation_api:*

äº‹ä»¶é€šçŸ¥å±‚:
â”œâ”€â”€ eh_event:event_notify/3
â”œâ”€â”€ eh_event:message/3
â””â”€â”€ eh_event:state/3
                </div>
            </div>
        </div>
    </div>
</body>
</html>