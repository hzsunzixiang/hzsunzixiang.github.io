<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erlang CRAQ ç³»ç»Ÿä½¿ç”¨æŒ‡å—</title>
    <script src="https://cdn.jsdelivr.net/npm/html-docx-js/dist/html-docx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 3px solid #2c3e50;
            padding-bottom: 20px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .download-btn {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin: 20px 0;
            transition: background-color 0.3s;
        }
        
        .download-btn:hover {
            background-color: #2980b9;
        }
        
        .toc {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        
        .toc h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 8px 0;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .toc a:hover {
            color: #2980b9;
            text-decoration: underline;
        }
        
        .section {
            margin-bottom: 40px;
            page-break-inside: avoid;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 1.3em;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .section h4 {
            color: #7f8c8d;
            font-size: 1.1em;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        
        .section p {
            margin-bottom: 12px;
            text-align: justify;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.4;
        }
        
        .code-block code {
            color: #2c3e50;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .note {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }
        
        .note strong {
            color: #2c3e50;
        }
        
        .warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }
        
        .warning strong {
            color: #856404;
        }
        
        .success {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 3px;
        }
        
        .success strong {
            color: #155724;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        table th {
            background-color: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        
        table td {
            border: 1px solid #ddd;
            padding: 12px;
        }
        
        table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        table tr:hover {
            background-color: #f0f0f0;
        }
        
        .mermaid-container {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .mermaid {
            display: inline-block;
        }
        
        .list-item {
            margin-left: 20px;
            margin-bottom: 8px;
        }
        
        .list-item strong {
            color: #2c3e50;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
                max-width: 100%;
            }
            .download-btn {
                display: none;
            }
        }
    </style>
</head>
<body>
<!-- CRAQ æ–‡æ¡£å¯¼èˆªæ  -->
<div id="craq-nav" style="
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(15, 15, 35, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 12px 20px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
">
    <a href="/craq/" style="
        color: #00d4ff;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#7c3aed'" onmouseout="this.style.color='#00d4ff'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        è¿”å› CRAQ æ–‡æ¡£é¦–é¡µ
    </a>
    
    <div style="flex: 1;"></div>
    
    <a href="/" style="
        color: #888;
        text-decoration: none;
        font-size: 14px;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#fff'" onmouseout="this.style.color='#888'">
        åšå®¢é¦–é¡µ
    </a>
</div>

<!-- ä¸ºå¯¼èˆªæ æ·»åŠ é¡¶éƒ¨é—´è· -->
<div style="height: 60px;"></div>

    <div class="container">
        <div class="header">
            <h1>ğŸ“š Erlang CRAQ ç³»ç»Ÿä½¿ç”¨æŒ‡å—</h1>
            <p>Chain Replication with Apportioned Queries - é«˜ååé‡åŸå­å­˜å‚¨ç³»ç»Ÿ</p>
            <button class="download-btn" onclick="exportToWord()">ğŸ“¥ ä¸‹è½½ä¸º Word æ–‡æ¡£</button>
        </div>
        
        <div class="toc">
            <h2>ğŸ“– ç›®å½•</h2>
            <ul>
                <li><a href="#intro">1. ç³»ç»Ÿä»‹ç»</a></li>
                <li><a href="#architecture">2. ç³»ç»Ÿæ¶æ„</a></li>
                <li><a href="#setup">3. ç³»ç»Ÿå®‰è£…ä¸é…ç½®</a></li>
                <li><a href="#startup">4. ç³»ç»Ÿå¯åŠ¨</a></li>
                <li><a href="#usage">5. åŸºæœ¬ä½¿ç”¨</a></li>
                <li><a href="#operations">6. å¸¸è§æ“ä½œ</a></li>
                <li><a href="#config">7. é…ç½®è¯´æ˜</a></li>
                <li><a href="#troubleshooting">8. æ•…éšœæ’æŸ¥</a></li>
                <li><a href="#performance">9. æ€§èƒ½ç‰¹ç‚¹</a></li>
            </ul>
        </div>
        
        <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿä»‹ç» -->
        <div class="section" id="intro">
            <h2>1. ç³»ç»Ÿä»‹ç»</h2>
            
            <h3>1.1 ä»€ä¹ˆæ˜¯ Erlang CRAQï¼Ÿ</h3>
            <p>
                Erlang CRAQ æ˜¯ä¸€ä¸ªåŸºäº Erlang è¯­è¨€å®ç°çš„åˆ†å¸ƒå¼åŸå­å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒç»“åˆäº†ä¸¤ç¯‡ç»å…¸è®ºæ–‡çš„æ€æƒ³ï¼š
            </p>
            <div class="list-item">
                <strong>â€¢ "A High Throughput Atomic Storage Algorithm"</strong> - ç”± Rachid Guerraoui ç­‰äººæå‡º
            </div>
            <div class="list-item">
                <strong>â€¢ "Object Storage on CRAQ: High-throughput chain replication for read-mostly workloads"</strong> - ç”± Jeff Terrace å’Œ Michael J. Freeman æå‡º
            </div>
            
            <h3>1.2 æ ¸å¿ƒç‰¹æ€§</h3>
            <div class="list-item">
                <strong>âœ“ é«˜ååé‡ï¼š</strong> æ”¯æŒå¹¶å‘å†™å…¥ï¼Œå…è®¸å®¢æˆ·ç«¯å‘ä»»ä½•èŠ‚ç‚¹å†™å…¥æ•°æ®
            </div>
            <div class="list-item">
                <strong>âœ“ å¼ºä¸€è‡´æ€§ï¼š</strong> ä¿è¯æ•°æ®çš„åŸå­æ€§å’Œä¸€è‡´æ€§ï¼Œé˜²æ­¢å¹¶å‘æ›´æ–°åŒä¸€å¯¹è±¡
            </div>
            <div class="list-item">
                <strong>âœ“ é«˜å¯ç”¨æ€§ï¼š</strong> æ”¯æŒèŠ‚ç‚¹æ•…éšœæ£€æµ‹å’Œè‡ªåŠ¨æ¢å¤ï¼Œåªè¦è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹å¯ç”¨ï¼Œç³»ç»Ÿå°±èƒ½ç»§ç»­å·¥ä½œ
            </div>
            <div class="list-item">
                <strong>âœ“ é“¾å¼å¤åˆ¶ï¼š</strong> é‡‡ç”¨é“¾å¼å¤åˆ¶æ¶æ„ï¼Œæä¾›é«˜æ•ˆçš„æ•°æ®å¤åˆ¶å’Œä¸€è‡´æ€§ä¿è¯
            </div>
            <div class="list-item">
                <strong>âœ“ è¿·ä½ äº‹åŠ¡ï¼š</strong> æ”¯æŒåœ¨å•æ¬¡è°ƒç”¨ä¸­æ›´æ–°å¤šä¸ªå¯¹è±¡
            </div>
            <div class="list-item">
                <strong>âœ“ è¯»åæ¼”é—®é¢˜è§£å†³ï¼š</strong> é˜²æ­¢åœ¨è¯»å–æ–°å€¼åå†è¯»å–æ—§å€¼çš„æƒ…å†µ
            </div>
            
            <h3>1.3 ç³»ç»Ÿå‡è®¾</h3>
            <div class="note">
                <strong>é‡è¦ï¼š</strong> è¯¥ç³»ç»Ÿå‡è®¾ç‚¹å¯¹ç‚¹é€šä¿¡åœ¨æ‰€æœ‰æœåŠ¡å™¨ä¹‹é—´å§‹ç»ˆå¯ç”¨ï¼ˆåˆ†åŒºä¸å®¹é”™ï¼‰ã€‚
                ç³»ç»Ÿé‡‡ç”¨æ•…éšœæ£€æµ‹æœºåˆ¶æ¥æ£€æµ‹æœåŠ¡å™¨æ•…éšœï¼Œå¹¶åœ¨è‡³å°‘æœ‰ä¸€ä¸ªæœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ç»§ç»­å·¥ä½œã€‚
            </div>
        </div>
        
        <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šç³»ç»Ÿæ¶æ„ -->
        <div class="section" id="architecture">
            <h2>2. ç³»ç»Ÿæ¶æ„</h2>
            
            <h3>2.1 é“¾å¼å¤åˆ¶æ¶æ„</h3>
            <p>
                CRAQ ç³»ç»Ÿé‡‡ç”¨é“¾å¼å¤åˆ¶æ¶æ„ï¼Œæ‰€æœ‰èŠ‚ç‚¹å½¢æˆä¸€æ¡é“¾ï¼Œæ•°æ®ä»å¤´èŠ‚ç‚¹æµå‘å°¾èŠ‚ç‚¹ã€‚
            </p>
            
            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    A["Head Node<br/>(å¤´èŠ‚ç‚¹)"] -->|Forward| B["Middle Node<br/>(ä¸­é—´èŠ‚ç‚¹)"]
                    B -->|Forward| C["Tail Node<br/>(å°¾èŠ‚ç‚¹)"]
                    C -->|Backward| B
                    B -->|Backward| A
                    
                    Client1["Client<br/>(å®¢æˆ·ç«¯)"] -->|Write| A
                    Client2["Client<br/>(å®¢æˆ·ç«¯)"] -->|Read| C
                    
                    style A fill:#e8f4f8
                    style B fill:#e8f4f8
                    style C fill:#e8f4f8
                    style Client1 fill:#d4edda
                    style Client2 fill:#d4edda
                </div>
            </div>
            
            <h3>2.2 æ¶ˆæ¯æµå‘</h3>
            <p>
                ç³»ç»Ÿä¸­çš„æ¶ˆæ¯æµå‘åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š
            </p>
            
            <h4>æ­£å‘ä¼ æ’­ï¼ˆForward Propagationï¼‰</h4>
            <div class="list-item">
                <strong>1. å®¢æˆ·ç«¯å‘é€å†™è¯·æ±‚</strong> åˆ°ä»»æ„èŠ‚ç‚¹ï¼ˆé€šå¸¸æ˜¯å¤´èŠ‚ç‚¹ï¼‰
            </div>
            <div class="list-item">
                <strong>2. èŠ‚ç‚¹æ¥æ”¶è¯·æ±‚</strong> å¹¶ç”Ÿæˆæ—¶é—´æˆ³
            </div>
            <div class="list-item">
                <strong>3. æ¶ˆæ¯æ²¿é“¾ä¼ æ’­</strong> ä»å‰é©±èŠ‚ç‚¹ä¼ é€’åˆ°åç»§èŠ‚ç‚¹
            </div>
            <div class="list-item">
                <strong>4. å°¾èŠ‚ç‚¹å¤„ç†</strong> å®Œæˆæ•°æ®æ›´æ–°
            </div>
            
            <h4>åå‘ç¡®è®¤ï¼ˆBackward Acknowledgmentï¼‰</h4>
            <div class="list-item">
                <strong>1. å°¾èŠ‚ç‚¹ç¡®è®¤</strong> æ•°æ®å·²æäº¤
            </div>
            <div class="list-item">
                <strong>2. ç¡®è®¤æ²¿é“¾åå‘ä¼ æ’­</strong> ä»åç»§èŠ‚ç‚¹ä¼ é€’åˆ°å‰é©±èŠ‚ç‚¹
            </div>
            <div class="list-item">
                <strong>3. å¤´èŠ‚ç‚¹å›å¤å®¢æˆ·ç«¯</strong> æ“ä½œå®Œæˆ
            </div>
            
            <h3>2.3 æ ¸å¿ƒæ¨¡å—</h3>
            <table>
                <tr>
                    <th>æ¨¡å—åç§°</th>
                    <th>åŠŸèƒ½æè¿°</th>
                    <th>å…³é”®èŒè´£</th>
                </tr>
                <tr>
                    <td><code>eh_system_server</code></td>
                    <td>ç³»ç»Ÿä¸»æœåŠ¡å™¨</td>
                    <td>å¤„ç†æ‰€æœ‰æ¶ˆæ¯ï¼Œç®¡ç†ç³»ç»ŸçŠ¶æ€</td>
                </tr>
                <tr>
                    <td><code>eh_repl_ring</code></td>
                    <td>å¤åˆ¶ç¯ç®¡ç†</td>
                    <td>ç®¡ç†èŠ‚ç‚¹é“¾ï¼Œè®¡ç®—å‰é©±å’Œåç»§</td>
                </tr>
                <tr>
                    <td><code>eh_update_msg</code></td>
                    <td>æ›´æ–°æ¶ˆæ¯å¤„ç†</td>
                    <td>ç”Ÿæˆå’Œå¤„ç†æ›´æ–°æ¶ˆæ¯</td>
                </tr>
                <tr>
                    <td><code>eh_node_timestamp</code></td>
                    <td>æ—¶é—´æˆ³ç®¡ç†</td>
                    <td>ç®¡ç†æ¶ˆæ¯æ—¶é—´æˆ³å’Œç‰ˆæœ¬</td>
                </tr>
                <tr>
                    <td><code>eh_persist_data</code></td>
                    <td>æ•°æ®æŒä¹…åŒ–</td>
                    <td>å°†æ•°æ®æŒä¹…åŒ–åˆ°å­˜å‚¨</td>
                </tr>
                <tr>
                    <td><code>eh_query_handler</code></td>
                    <td>æŸ¥è¯¢å¤„ç†</td>
                    <td>å¤„ç†è¯»è¯·æ±‚</td>
                </tr>
                <tr>
                    <td><code>eh_failure_detector</code></td>
                    <td>æ•…éšœæ£€æµ‹</td>
                    <td>æ£€æµ‹èŠ‚ç‚¹æ•…éšœ</td>
                </tr>
            </table>
        </div>
        
        <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®‰è£…ä¸é…ç½® -->
        <div class="section" id="setup">
            <h2>3. ç³»ç»Ÿå®‰è£…ä¸é…ç½®</h2>
            
            <h3>3.1 å‰ç½®è¦æ±‚</h3>
            <div class="list-item">
                <strong>â€¢ Erlang/OTPï¼š</strong> ç‰ˆæœ¬ 18.0 æˆ–æ›´é«˜
            </div>
            <div class="list-item">
                <strong>â€¢ Rebar3ï¼š</strong> Erlang æ„å»ºå·¥å…·
            </div>
            <div class="list-item">
                <strong>â€¢ æ“ä½œç³»ç»Ÿï¼š</strong> Linuxã€macOS æˆ–å…¶ä»– Unix ç³»ç»Ÿ
            </div>
            
            <h3>3.2 ç¼–è¯‘é¡¹ç›®</h3>
            <div class="code-block">
<code>cd /path/to/erlang_craq
make all
# æˆ–è€…
rebar3 compile</code>
            </div>
            
            <h3>3.3 é¡¹ç›®ç»“æ„</h3>
            <div class="code-block">
<code>erlang_craq/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ eh_system_server.erl
â”‚   â”œâ”€â”€ eh_repl_ring.erl
â”‚   â”œâ”€â”€ eh_update_msg.erl
â”‚   â””â”€â”€ ...
â”œâ”€â”€ include/                # å¤´æ–‡ä»¶
â”‚   â””â”€â”€ erlang_craq.hrl
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ sys.config         # ç³»ç»Ÿé…ç½®
â”‚   â””â”€â”€ vm.args            # è™šæ‹Ÿæœºå‚æ•°
â”œâ”€â”€ ebin/                   # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ craq_erl.sh            # å¯åŠ¨è„šæœ¬
â””â”€â”€ Makefile               # æ„å»ºæ–‡ä»¶</code>
            </div>
        </div>
        
        <!-- ç¬¬å››éƒ¨åˆ†ï¼šç³»ç»Ÿå¯åŠ¨ -->
        <div class="section" id="startup">
            <h2>4. ç³»ç»Ÿå¯åŠ¨</h2>
            
            <h3>4.1 å•èŠ‚ç‚¹å¯åŠ¨</h3>
            <p>
                ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬å¯åŠ¨å•ä¸ªèŠ‚ç‚¹ï¼š
            </p>
            <div class="code-block">
<code>./craq_erl.sh node1</code>
            </div>
            
            <p>
                è¿™å°†å¯åŠ¨ä¸€ä¸ªåä¸º <span class="highlight">node1@hostname</span> çš„ Erlang èŠ‚ç‚¹ã€‚
            </p>
            
            <h3>4.2 å¤šèŠ‚ç‚¹å¯åŠ¨</h3>
            <p>
                åœ¨ä¸åŒçš„ç»ˆç«¯ä¸­å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ï¼š
            </p>
            <div class="code-block">
<code># ç»ˆç«¯ 1
./craq_erl.sh node1

# ç»ˆç«¯ 2
./craq_erl.sh node2

# ç»ˆç«¯ 3
./craq_erl.sh node3</code>
            </div>
            
            <h3>4.3 èŠ‚ç‚¹è¿æ¥</h3>
            <p>
                å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹åï¼Œéœ€è¦å°†å®ƒä»¬è¿æ¥æˆä¸€æ¡é“¾ã€‚åœ¨ä»»æ„èŠ‚ç‚¹çš„ Erlang shell ä¸­æ‰§è¡Œï¼š
            </p>
            <div class="code-block">
<code>% è¿æ¥èŠ‚ç‚¹
net_kernel:connect_node('node2@hostname').
net_kernel:connect_node('node3@hostname').

% è®¾ç½®å¤åˆ¶ç¯
erlang_craq:setup_repl(['node1@hostname', 'node2@hostname', 'node3@hostname']).</code>
            </div>
            
            <div class="success">
                <strong>âœ“ æˆåŠŸï¼š</strong> å½“çœ‹åˆ° "ok" è¿”å›æ—¶ï¼Œè¡¨ç¤ºå¤åˆ¶ç¯å·²æˆåŠŸå»ºç«‹ã€‚
            </div>
            
            <h3>4.4 éªŒè¯ç³»ç»ŸçŠ¶æ€</h3>
            <div class="code-block">
<code>% æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
erlang_craq:data_view().

% æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
erlang_craq:node_info().</code>
            </div>
        </div>
        
        <!-- ç¬¬äº”éƒ¨åˆ†ï¼šåŸºæœ¬ä½¿ç”¨ -->
        <div class="section" id="usage">
            <h2>5. åŸºæœ¬ä½¿ç”¨</h2>
            
            <h3>5.1 å†™å…¥æ•°æ®</h3>
            <p>
                å‘ç³»ç»Ÿä¸­å†™å…¥æ•°æ®ï¼š
            </p>
            <div class="code-block">
<code>% å†™å…¥å•ä¸ªå¯¹è±¡
erlang_craq:update([{node1@hostname, [{user, 1, {name, "Alice", 30}}]}]).

% å†™å…¥å¤šä¸ªå¯¹è±¡ï¼ˆè¿·ä½ äº‹åŠ¡ï¼‰
erlang_craq:update([
    {node1@hostname, [
        {user, 1, {name, "Alice", 30}},
        {user, 2, {name, "Bob", 25}}
    ]}
]).</code>
            </div>
            
            <h3>5.2 è¯»å–æ•°æ®</h3>
            <p>
                ä»ç³»ç»Ÿä¸­è¯»å–æ•°æ®ï¼š
            </p>
            <div class="code-block">
<code>% è¯»å–å•ä¸ªå¯¹è±¡
erlang_craq:query({user, 1}).

% è¯»å–å¤šä¸ªå¯¹è±¡
erlang_craq:query({user, 2}).</code>
            </div>
            
            <h3>5.3 æ•°æ®æ ¼å¼</h3>
            <p>
                ç³»ç»Ÿä¸­çš„æ•°æ®é‡‡ç”¨ä»¥ä¸‹æ ¼å¼ï¼š
            </p>
            <div class="code-block">
<code>{ObjectType, ObjectId, Value}

ç¤ºä¾‹ï¼š
{user, 1, {name, "Alice", 30}}
{product, 100, {title, "Laptop", 999.99}}
{order, 5001, {status, "shipped", "2024-01-15"}}</code>
            </div>
            
            <h3>5.4 æŸ¥è¯¢æ¨¡å¼</h3>
            <p>
                ç³»ç»Ÿæ”¯æŒå¤šç§æŸ¥è¯¢æ¨¡å¼ï¼š
            </p>
            <table>
                <tr>
                    <th>æŸ¥è¯¢æ¨¡å¼</th>
                    <th>æè¿°</th>
                    <th>é€‚ç”¨åœºæ™¯</th>
                </tr>
                <tr>
                    <td>Wait Query</td>
                    <td>ç­‰å¾…æŸ¥è¯¢ï¼Œç¡®ä¿è¯»å–æœ€æ–°æ•°æ®</td>
                    <td>éœ€è¦å¼ºä¸€è‡´æ€§çš„è¯»å–</td>
                </tr>
                <tr>
                    <td>No-Wait Query</td>
                    <td>æ— ç­‰å¾…æŸ¥è¯¢ï¼Œç«‹å³è¿”å›</td>
                    <td>å¯æ¥å—å¼±ä¸€è‡´æ€§çš„è¯»å–</td>
                </tr>
                <tr>
                    <td>Dirty Read Query</td>
                    <td>è„è¯»æŸ¥è¯¢ï¼Œè¯»å–æœªæäº¤çš„æ•°æ®</td>
                    <td>å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</td>
                </tr>
                <tr>
                    <td>AQ Query</td>
                    <td>Apportioned Queryï¼Œåˆ†æ•£æŸ¥è¯¢</td>
                    <td>è´Ÿè½½å‡è¡¡çš„è¯»å–</td>
                </tr>
            </table>
        </div>
        
        <!-- ç¬¬å…­éƒ¨åˆ†ï¼šå¸¸è§æ“ä½œ -->
        <div class="section" id="operations">
            <h2>6. å¸¸è§æ“ä½œ</h2>
            
            <h3>6.1 æ·»åŠ æ–°èŠ‚ç‚¹</h3>
            <p>
                å‘ç°æœ‰çš„å¤åˆ¶é“¾ä¸­æ·»åŠ æ–°èŠ‚ç‚¹ï¼š
            </p>
            <div class="code-block">
<code>% åœ¨æ–°èŠ‚ç‚¹ä¸Šå¯åŠ¨ Erlang
./craq_erl.sh node4

% åœ¨ä»»æ„ç°æœ‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œ
erlang_craq:add_node('node4@hostname', 
    ['node1@hostname', 'node2@hostname', 'node3@hostname', 'node4@hostname']).</code>
            </div>
            
            <h3>6.2 å¤„ç†èŠ‚ç‚¹æ•…éšœ</h3>
            <p>
                ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹èŠ‚ç‚¹æ•…éšœå¹¶è¿›è¡Œå¤„ç†ï¼š
            </p>
            <div class="list-item">
                <strong>1. æ•…éšœæ£€æµ‹ï¼š</strong> ç³»ç»Ÿé€šè¿‡å¿ƒè·³æ£€æµ‹èŠ‚ç‚¹æ•…éšœ
            </div>
            <div class="list-item">
                <strong>2. è‡ªåŠ¨æ¢å¤ï¼š</strong> æ•…éšœèŠ‚ç‚¹ä»é“¾ä¸­ç§»é™¤ï¼Œç³»ç»Ÿç»§ç»­è¿è¡Œ
            </div>
            <div class="list-item">
                <strong>3. æ•°æ®ä¸€è‡´æ€§ï¼š</strong> ç³»ç»Ÿä¿è¯æ•°æ®ä¸€è‡´æ€§ä¸å—å½±å“
            </div>
            
            <h3>6.3 æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€</h3>
            <div class="code-block">
<code>% æŸ¥çœ‹æ‰€æœ‰æ•°æ®
erlang_craq:data_view().

% æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯
erlang_craq:node_info().

% æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡
erlang_craq:statistics().</code>
            </div>
            
            <h3>6.4 æ•°æ®æŒä¹…åŒ–</h3>
            <p>
                ç³»ç»Ÿè‡ªåŠ¨å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼š
            </p>
            <div class="list-item">
                <strong>â€¢ æŒä¹…åŒ–ä½ç½®ï¼š</strong> ç”±é…ç½®æ–‡ä»¶ä¸­çš„ <code>data_dir</code> æŒ‡å®š
            </div>
            <div class="list-item">
                <strong>â€¢ æ–‡ä»¶æ ¼å¼ï¼š</strong> äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ–‡ä»¶åä¸º <code>nodename_repl.data</code>
            </div>
            <div class="list-item">
                <strong>â€¢ æ£€æŸ¥ç‚¹ï¼š</strong> æ¯ 10000 æ¡æ¶ˆæ¯åˆ›å»ºä¸€ä¸ªæ£€æŸ¥ç‚¹
            </div>
        </div>
        
        <!-- ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé…ç½®è¯´æ˜ -->
        <div class="section" id="config">
            <h2>7. é…ç½®è¯´æ˜</h2>
            
            <h3>7.1 é…ç½®æ–‡ä»¶ä½ç½®</h3>
            <p>
                ç³»ç»Ÿé…ç½®æ–‡ä»¶ä½äº <code>config/sys.config</code>
            </p>
            
            <h3>7.2 ä¸»è¦é…ç½®å‚æ•°</h3>
            <table>
                <tr>
                    <th>å‚æ•°åç§°</th>
                    <th>é»˜è®¤å€¼</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>replication_type</code></td>
                    <td>craq</td>
                    <td>å¤åˆ¶ç±»å‹ï¼Œå›ºå®šä¸º craq</td>
                </tr>
                <tr>
                    <td><code>node_order</code></td>
                    <td>sorted</td>
                    <td>èŠ‚ç‚¹æ’åºæ–¹å¼ï¼Œsorted è¡¨ç¤ºæŒ‰å­—æ¯é¡ºåº</td>
                </tr>
                <tr>
                    <td><code>failure_detector</code></td>
                    <td>eh_failure_detector_api</td>
                    <td>æ•…éšœæ£€æµ‹å™¨å®ç°</td>
                </tr>
                <tr>
                    <td><code>repl_data_manager</code></td>
                    <td>eh_repl_data_manager_api</td>
                    <td>å¤åˆ¶æ•°æ®ç®¡ç†å™¨</td>
                </tr>
                <tr>
                    <td><code>storage_data</code></td>
                    <td>eh_storage_data_api</td>
                    <td>å­˜å‚¨æ•°æ®å®ç°</td>
                </tr>
                <tr>
                    <td><code>query_handler</code></td>
                    <td>eh_wait_query_handler_api</td>
                    <td>æŸ¥è¯¢å¤„ç†å™¨ï¼Œå¯é€‰å€¼ï¼šeh_wait_query_handler_api, eh_no_wait_query_handler_api, eh_dirty_read_query_handler_api</td>
                </tr>
                <tr>
                    <td><code>data_checkpoint</code></td>
                    <td>10000</td>
                    <td>æ£€æŸ¥ç‚¹é—´éš”ï¼ˆæ¶ˆæ¯æ•°ï¼‰</td>
                </tr>
                <tr>
                    <td><code>data_dir</code></td>
                    <td>./</td>
                    <td>æ•°æ®å­˜å‚¨ç›®å½•</td>
                </tr>
                <tr>
                    <td><code>file_repl_data</code></td>
                    <td>_repl.data</td>
                    <td>å¤åˆ¶æ•°æ®æ–‡ä»¶ååç¼€</td>
                </tr>
                <tr>
                    <td><code>debug_mode</code></td>
                    <td>true</td>
                    <td>æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼</td>
                </tr>
                <tr>
                    <td><code>sup_restart_intensity</code></td>
                    <td>100</td>
                    <td>ç›‘ç£è€…é‡å¯å¼ºåº¦</td>
                </tr>
                <tr>
                    <td><code>sup_restart_period</code></td>
                    <td>1</td>
                    <td>ç›‘ç£è€…é‡å¯å‘¨æœŸï¼ˆç§’ï¼‰</td>
                </tr>
                <tr>
                    <td><code>sup_child_shutdown</code></td>
                    <td>2000</td>
                    <td>å­è¿›ç¨‹å…³é—­è¶…æ—¶ï¼ˆæ¯«ç§’ï¼‰</td>
                </tr>
            </table>
            
            <h3>7.3 ä¿®æ”¹é…ç½®</h3>
            <p>
                ç¼–è¾‘ <code>config/sys.config</code> æ–‡ä»¶æ¥ä¿®æ”¹é…ç½®ï¼š
            </p>
            <div class="code-block">
<code>[
  {erlang_craq,
    [  
       {replication_type          , craq}
      ,{node_order                , sorted}
      ,{query_handler             , eh_wait_query_handler_api}
      ,{data_checkpoint           , 10000}
      ,{data_dir                  , "./data/"}
      ,{debug_mode                , true}
    ]
  }
].</code>
            </div>
            
            <div class="warning">
                <strong>âš ï¸ æ³¨æ„ï¼š</strong> ä¿®æ”¹é…ç½®åéœ€è¦é‡æ–°å¯åŠ¨ç³»ç»Ÿæ‰èƒ½ç”Ÿæ•ˆã€‚
            </div>
        </div>
        
        <!-- ç¬¬å…«éƒ¨åˆ†ï¼šæ•…éšœæ’æŸ¥ -->
        <div class="section" id="troubleshooting">
            <h2>8. æ•…éšœæ’æŸ¥</h2>
            
            <h3>8.1 å¸¸è§é—®é¢˜</h3>
            
            <h4>é—®é¢˜ 1ï¼šèŠ‚ç‚¹æ— æ³•è¿æ¥</h4>
            <div class="code-block">
<code>é”™è¯¯ä¿¡æ¯ï¼š{error, nodedown}

è§£å†³æ–¹æ¡ˆï¼š
1. æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å·²å¯åŠ¨
2. æ£€æŸ¥ç½‘ç»œè¿æ¥
3. ç¡®ä¿èŠ‚ç‚¹åç§°æ­£ç¡®
4. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</code>
            </div>
            
            <h4>é—®é¢˜ 2ï¼šæ•°æ®å†™å…¥å¤±è´¥</h4>
            <div class="code-block">
<code>é”™è¯¯ä¿¡æ¯ï¼š{error, node_unavailable}

è§£å†³æ–¹æ¡ˆï¼š
1. æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²åˆå§‹åŒ–ï¼ˆsetup_replï¼‰
2. æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†ä¿¡æ¯</code>
            </div>
            
            <h4>é—®é¢˜ 3ï¼šè¯»å–è¿”å›æ—§æ•°æ®</h4>
            <div class="code-block">
<code>åŸå› ï¼šå¯èƒ½ä½¿ç”¨äº†å¼±ä¸€è‡´æ€§æŸ¥è¯¢æ¨¡å¼

è§£å†³æ–¹æ¡ˆï¼š
1. åˆ‡æ¢åˆ° wait_query_handler æ¨¡å¼
2. æˆ–è€…ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´è®©æ•°æ®åŒæ­¥</code>
            </div>
            
            <h3>8.2 æ—¥å¿—æŸ¥çœ‹</h3>
            <p>
                ç³»ç»Ÿæ—¥å¿—ä½äº <code>./log/</code> ç›®å½•ï¼š
            </p>
            <div class="list-item">
                <strong>â€¢ info.logï¼š</strong> ä¿¡æ¯æ—¥å¿—
            </div>
            <div class="list-item">
                <strong>â€¢ error.logï¼š</strong> é”™è¯¯æ—¥å¿—
            </div>
            
            <div class="code-block">
<code>% æŸ¥çœ‹æœ€æ–°çš„é”™è¯¯æ—¥å¿—
tail -f ./log/error.log

% æŸ¥çœ‹ä¿¡æ¯æ—¥å¿—
tail -f ./log/info.log</code>
            </div>
            
            <h3>8.3 è°ƒè¯•æŠ€å·§</h3>
            <div class="list-item">
                <strong>1. å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š</strong> åœ¨ sys.config ä¸­è®¾ç½® <code>debug_mode</code> ä¸º true
            </div>
            <div class="list_item">
                <strong>2. æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ï¼š</strong> ä½¿ç”¨ <code>erlang_craq:data_view()</code>
            </div>
            <div class="list-item">
                <strong>3. è¿½è¸ªæ¶ˆæ¯ï¼š</strong> ä½¿ç”¨ Erlang çš„ trace åŠŸèƒ½
            </div>
            <div class="code-block">
<code>% å¯ç”¨ trace
dbg:tracer().
dbg:p(all, c).
dbg:tpl(eh_system_server, '_', []).</code>
            </div>
        </div>
        
        <!-- ç¬¬ä¹éƒ¨åˆ†ï¼šæ€§èƒ½ç‰¹ç‚¹ -->
        <div class="section" id="performance">
            <h2>9. æ€§èƒ½ç‰¹ç‚¹</h2>
            
            <h3>9.1 æ€§èƒ½ä¼˜åŠ¿</h3>
            <div class="list-item">
                <strong>âœ“ é«˜å†™ååé‡ï¼š</strong> æ”¯æŒå¹¶å‘å†™å…¥ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯åŒæ—¶å‘ä¸åŒèŠ‚ç‚¹å†™å…¥
            </div>
            <div class="list-item">
                <strong>âœ“ é«˜è¯»ååé‡ï¼š</strong> è¯»æ“ä½œå¯åœ¨ä»»ä½•èŠ‚ç‚¹æ‰§è¡Œï¼Œä¸éœ€è¦ç­‰å¾…
            </div>
            <div class="list-item">
                <strong>âœ“ ä½å»¶è¿Ÿï¼š</strong> é“¾å¼å¤åˆ¶æä¾›ä½å»¶è¿Ÿçš„æ•°æ®åŒæ­¥
            </div>
            <div class="list-item">
                <strong>âœ“ å¯æ‰©å±•æ€§ï¼š</strong> å¯è½»æ¾æ·»åŠ æ–°èŠ‚ç‚¹æ‰©å±•ç³»ç»Ÿå®¹é‡
            </div>
            
            <h3>9.2 æ€§èƒ½æŒ‡æ ‡</h3>
            <table>
                <tr>
                    <th>æŒ‡æ ‡</th>
                    <th>è¯´æ˜</th>
                    <th>å½±å“å› ç´ </th>
                </tr>
                <tr>
                    <td>å†™ååé‡</td>
                    <td>æ¯ç§’å†™å…¥æ“ä½œæ•°</td>
                    <td>èŠ‚ç‚¹æ•°ã€ç½‘ç»œå»¶è¿Ÿã€æ•°æ®å¤§å°</td>
                </tr>
                <tr>
                    <td>è¯»ååé‡</td>
                    <td>æ¯ç§’è¯»å–æ“ä½œæ•°</td>
                    <td>èŠ‚ç‚¹æ•°ã€æŸ¥è¯¢æ¨¡å¼</td>
                </tr>
                <tr>
                    <td>å†™å»¶è¿Ÿ</td>
                    <td>å†™å…¥æ“ä½œå®Œæˆæ—¶é—´</td>
                    <td>é“¾é•¿åº¦ã€ç½‘ç»œå»¶è¿Ÿ</td>
                </tr>
                <tr>
                    <td>è¯»å»¶è¿Ÿ</td>
                    <td>è¯»å–æ“ä½œå®Œæˆæ—¶é—´</td>
                    <td>æŸ¥è¯¢æ¨¡å¼ã€æ•°æ®ä½ç½®</td>
                </tr>
            </table>
            
            <h3>9.3 ä¼˜åŒ–å»ºè®®</h3>
            <div class="list-item">
                <strong>1. é“¾é•¿åº¦ï¼š</strong> ä¿æŒé“¾é•¿åº¦åœ¨ 3-5 ä¸ªèŠ‚ç‚¹ï¼Œè¿‡é•¿ä¼šå¢åŠ å»¶è¿Ÿ
            </div>
            <div class="list-item">
                <strong>2. æŸ¥è¯¢æ¨¡å¼ï¼š</strong> æ ¹æ®ä¸€è‡´æ€§éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŸ¥è¯¢æ¨¡å¼
            </div>
            <div class="list-item">
                <strong>3. æ•°æ®åˆ†ç‰‡ï¼š</strong> å°†æ•°æ®åˆ†ç‰‡åˆ°å¤šä¸ªå¯¹è±¡ï¼Œæé«˜å¹¶å‘æ€§èƒ½
            </div>
            <div class="list-item">
                <strong>4. æ‰¹é‡æ“ä½œï¼š</strong> ä½¿ç”¨è¿·ä½ äº‹åŠ¡è¿›è¡Œæ‰¹é‡æ›´æ–°
            </div>
            <div class="list-item">
                <strong>5. æ£€æŸ¥ç‚¹é—´éš”ï¼š</strong> æ ¹æ®ç³»ç»Ÿè´Ÿè½½è°ƒæ•´æ£€æŸ¥ç‚¹é—´éš”
            </div>
            
            <h3>9.4 ä¸å…¶ä»–ç³»ç»Ÿçš„å¯¹æ¯”</h3>
            <table>
                <tr>
                    <th>ç³»ç»Ÿ</th>
                    <th>ä¸€è‡´æ€§</th>
                    <th>å¯ç”¨æ€§</th>
                    <th>åˆ†åŒºå®¹é”™</th>
                    <th>é€‚ç”¨åœºæ™¯</th>
                </tr>
                <tr>
                    <td>CRAQ</td>
                    <td>å¼º</td>
                    <td>é«˜</td>
                    <td>å¦</td>
                    <td>è¯»å¤šå†™å°‘ï¼Œé«˜ååé‡</td>
                </tr>
                <tr>
                    <td>Paxos</td>
                    <td>å¼º</td>
                    <td>é«˜</td>
                    <td>æ˜¯</td>
                    <td>é€šç”¨åˆ†å¸ƒå¼ç³»ç»Ÿ</td>
                </tr>
                <tr>
                    <td>Raft</td>
                    <td>å¼º</td>
                    <td>é«˜</td>
                    <td>æ˜¯</td>
                    <td>æ˜“äºç†è§£å’Œå®ç°</td>
                </tr>
                <tr>
                    <td>Chain Replication</td>
                    <td>å¼º</td>
                    <td>ä¸­</td>
                    <td>å¦</td>
                    <td>ç®€å•çš„é“¾å¼å¤åˆ¶</td>
                </tr>
            </table>
        </div>
        
        <!-- æ€»ç»“ -->
        <div class="section">
            <h2>æ€»ç»“</h2>
            <p>
                Erlang CRAQ æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼åŸå­å­˜å‚¨ç³»ç»Ÿï¼Œç‰¹åˆ«é€‚åˆè¯»å¤šå†™å°‘çš„å·¥ä½œè´Ÿè½½ã€‚
                é€šè¿‡é“¾å¼å¤åˆ¶æ¶æ„å’Œç²¾å¿ƒè®¾è®¡çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå®ƒæä¾›äº†å¼ºä¸€è‡´æ€§ã€é«˜ååé‡å’Œé«˜å¯ç”¨æ€§çš„å®Œç¾ç»“åˆã€‚
            </p>
            <p>
                æœ¬æŒ‡å—æ¶µç›–äº†ç³»ç»Ÿçš„å®‰è£…ã€é…ç½®ã€ä½¿ç”¨å’Œæ•…éšœæ’æŸ¥ç­‰æ–¹é¢ã€‚
                æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒæºä»£ç æ³¨é‡Šå’Œç›¸å…³è®ºæ–‡ã€‚
            </p>
        </div>
        
        <div class="footer">
            <p>Erlang CRAQ ç³»ç»Ÿä½¿ç”¨æŒ‡å— | æœ€åæ›´æ–°ï¼š2024å¹´</p>
            <p>åŸºäºè®ºæ–‡ï¼šChain Replication for Supporting High Throughput and Availability</p>
        </div>
    </div>
    
    <script>
        function exportToWord() {
            const loadingMsg = document.createElement('div');
            loadingMsg.style.position = 'fixed';
            loadingMsg.style.top = '50%';
            loadingMsg.style.left = '50%';
            loadingMsg.style.transform = 'translate(-50%, -50%)';
            loadingMsg.style.background = 'rgba(0,0,0,0.8)';
            loadingMsg.style.color = 'white';
            loadingMsg.style.padding = '20px';
            loadingMsg.style.borderRadius = '5px';
            loadingMsg.style.zIndex = '1000';
            loadingMsg.textContent = 'æ­£åœ¨å¯¼å‡º Word æ–‡æ¡£...';
            document.body.appendChild(loadingMsg);
            
            try {
                const content = document.documentElement.outerHTML;
                const converted = htmlDocx.asBlob(content);
                saveAs(converted, 'Erlang_CRAQ_ä½¿ç”¨æŒ‡å—.docx');
                
                document.body.removeChild(loadingMsg);
                alert('Word æ–‡æ¡£å¯¼å‡ºæˆåŠŸï¼');
            } catch (error) {
                console.error('å¯¼å‡ºå¤±è´¥:', error);
                document.body.removeChild(loadingMsg);
                alert('å¯¼å‡ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯: ' + error.message);
            }
        }
    </script>

<!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="back-to-top" style="
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #00d4ff, #7c3aed);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
    transition: all 0.3s ease;
    z-index: 999;
    opacity: 0;
    transform: translateY(20px);
" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" 
   onmouseover="this.style.transform='translateY(-5px) scale(1.1)'" 
   onmouseout="this.style.transform='translateY(0) scale(1)'">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
        <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
    </svg>
</div>

<script>
// å›åˆ°é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤º/éšè—é€»è¾‘
window.addEventListener('scroll', function() {
    const backToTop = document.getElementById('back-to-top');
    if (window.scrollY > 300) {
        backToTop.style.opacity = '1';
        backToTop.style.transform = 'translateY(0)';
    } else {
        backToTop.style.opacity = '0';
        backToTop.style.transform = 'translateY(20px)';
    }
});
</script>

</body>
</html>
