<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erlangæ–‡ä»¶æè¿°ç¬¦ç»“æ„è¯¦ç»†åˆ†æ</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #f5f7fa; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        .code-block { background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; margin: 10px 0; overflow-x: auto; }
        .highlight { background: #fff3cd; padding: 2px 4px; border-radius: 3px; }
        .warning { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 10px; border-radius: 5px; margin: 10px 0; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background: #f8f9fa; font-weight: bold; }
        .field-name { font-family: 'Courier New', monospace; background: #f8f9fa; padding: 2px 4px; border-radius: 3px; }
        .data-flow { background: #e8f5e8; border-left: 4px solid #28a745; padding: 15px; margin: 15px 0; }
    </style>
</head>
<body>
<!-- CRAQ æ–‡æ¡£å¯¼èˆªæ  -->
<div id="craq-nav" style="
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(15, 15, 35, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 12px 20px;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 20px;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
">
    <a href="/craq/" style="
        color: #00d4ff;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 500;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#7c3aed'" onmouseout="this.style.color='#00d4ff'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
        è¿”å› CRAQ æ–‡æ¡£é¦–é¡µ
    </a>
    
    <div style="flex: 1;"></div>
    
    <a href="/" style="
        color: #888;
        text-decoration: none;
        font-size: 14px;
        transition: all 0.3s ease;
    " onmouseover="this.style.color='#fff'" onmouseout="this.style.color='#888'">
        åšå®¢é¦–é¡µ
    </a>
</div>

<!-- ä¸ºå¯¼èˆªæ æ·»åŠ é¡¶éƒ¨é—´è· -->
<div style="height: 60px;"></div>

    <div class="container">
        <h1>ğŸ” Erlangæ–‡ä»¶æè¿°ç¬¦ç»“æ„è¯¦ç»†åˆ†æ</h1>
        
        <div class="info">
            <strong>åˆ†æç›®æ ‡</strong>: è§£æCRAQç³»ç»Ÿtraceæ—¥å¿—ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ç»“æ„ï¼Œç†è§£å„å­—æ®µä½œç”¨åŠæ˜¯å¦å†™å…¥æ–‡ä»¶
        </div>

        <h2>ğŸ“Š æ–‡ä»¶æè¿°ç¬¦ç»“æ„è§£æ</h2>
        
        <h3>ğŸ”§ åŸå§‹ç»“æ„</h3>
        <div class="code-block">
{file_descriptor, prim_file,
    #{handle => #Ref&lt;0.468240768.1635909645.195572&gt;,
      owner => &lt;0.907.0&gt;,
      r_buffer => #Ref&lt;0.468240768.1635909634.216835&gt;,
      r_ahead_size => 0}}
        </div>

        <h3>ğŸ“‹ å­—æ®µè¯¦ç»†è¯´æ˜</h3>
        <table>
            <thead>
                <tr>
                    <th>å­—æ®µå</th>
                    <th>ç±»å‹</th>
                    <th>ä½œç”¨</th>
                    <th>æ˜¯å¦å†™å…¥æ–‡ä»¶</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="field-name">file_descriptor</span></td>
                    <td>Atom</td>
                    <td>æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è®°å½•</td>
                    <td>âŒ å¦</td>
                </tr>
                <tr>
                    <td><span class="field-name">prim_file</span></td>
                    <td>Atom</td>
                    <td>æŒ‡å®šä½¿ç”¨åŸå§‹æ–‡ä»¶é©±åŠ¨(prim_file driver)</td>
                    <td>âŒ å¦</td>
                </tr>
                <tr>
                    <td><span class="field-name">handle</span></td>
                    <td>Reference</td>
                    <td>åº•å±‚æ–‡ä»¶å¥æŸ„çš„å”¯ä¸€å¼•ç”¨æ ‡è¯†</td>
                    <td>âŒ å¦</td>
                </tr>
                <tr>
                    <td><span class="field-name">owner</span></td>
                    <td>PID</td>
                    <td>æ‹¥æœ‰æ­¤æ–‡ä»¶æè¿°ç¬¦çš„è¿›ç¨‹ID</td>
                    <td>âŒ å¦</td>
                </tr>
                <tr>
                    <td><span class="field-name">r_buffer</span></td>
                    <td>Reference</td>
                    <td>è¯»ç¼“å†²åŒºçš„å¼•ç”¨(ç”¨äºæ€§èƒ½ä¼˜åŒ–)</td>
                    <td>âŒ å¦</td>
                </tr>
                <tr>
                    <td><span class="field-name">r_ahead_size</span></td>
                    <td>Integer</td>
                    <td>é¢„è¯»ç¼“å†²åŒºå¤§å°(0è¡¨ç¤ºç¦ç”¨é¢„è¯»)</td>
                    <td>âŒ å¦</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ¯ æ ¸å¿ƒåŠŸèƒ½åˆ†æ</h2>

        <h3>ğŸ’¾ å®é™…å†™å…¥çš„æ•°æ®</h3>
        <div class="success">
            <strong>é‡è¦ç»“è®º</strong>: æ–‡ä»¶æè¿°ç¬¦ç»“æ„ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½<strong>ä¸ä¼šå†™å…¥åˆ°æ–‡ä»¶ä¸­</strong>ï¼
        </div>

        <div class="data-flow">
            <h4>ğŸ“ å®é™…å†™å…¥æ–‡ä»¶çš„æ•°æ®</h4>
            <div class="code-block">
&lt;&lt;87,112,193,220,109,127,86,152,80,101,153,176,6,88,209,146,230,163,20,207,0,0,
  0,58,131,104,8,119,15,101,104,95,115,116,111,114,97,103,101,95,100,97,116,97,
  119,9,99,97,110,100,105,100,97,116,101,97,10,97,4,97,2,97,1,119,5,112,97,114,
  116,121,119,10,114,101,112,117,98,108,105,99,97,110&gt;&gt;
            </div>
            
            <p><strong>æ•°æ®ç»“æ„</strong>:</p>
            <ul>
                <li><span class="highlight">å‰20å­—èŠ‚</span>: SHA1å“ˆå¸Œå€¼</li>
                <li><span class="highlight">ç¬¬21-24å­—èŠ‚</span>: æ•°æ®é•¿åº¦(58å­—èŠ‚)</li>
                <li><span class="highlight">ç¬¬25-82å­—èŠ‚</span>: åºåˆ—åŒ–çš„å€™é€‰äººæ•°æ®</li>
            </ul>
        </div>

        <h3>ğŸ”§ å­—æ®µåŠŸèƒ½è¯¦è§£</h3>

        <h4>1. <span class="field-name">handle</span> - æ–‡ä»¶å¥æŸ„å¼•ç”¨</h4>
        <div class="info">
            <ul>
                <li><strong>ä½œç”¨</strong>: æ“ä½œç³»ç»Ÿçº§åˆ«çš„æ–‡ä»¶å¥æŸ„å”¯ä¸€æ ‡è¯†</li>
                <li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>: æ–‡ä»¶æ‰“å¼€æ—¶åˆ›å»ºï¼Œå…³é—­æ—¶é”€æ¯</li>
                <li><strong>ç”¨é€”</strong>: åº•å±‚æ–‡ä»¶I/Oæ“ä½œçš„ç›´æ¥å¼•ç”¨</li>
            </ul>
        </div>

        <h4>2. <span class="field-name">owner</span> - è¿›ç¨‹æ‰€æœ‰è€…</h4>
        <div class="info">
            <ul>
                <li><strong>PID</strong>: &lt;0.907.0&gt; è¡¨ç¤ºèŠ‚ç‚¹0ä¸Šçš„è¿›ç¨‹907</li>
                <li><strong>ä½œç”¨</strong>: ç¡®ä¿æ–‡ä»¶è®¿é—®çš„è¿›ç¨‹å®‰å…¨æ€§</li>
                <li><strong>æœºåˆ¶</strong>: åªæœ‰ownerè¿›ç¨‹å¯ä»¥æ“ä½œæ­¤æ–‡ä»¶æè¿°ç¬¦</li>
            </ul>
        </div>

        <h4>3. <span class="field-name">r_buffer</span> - è¯»ç¼“å†²åŒº</h4>
        <div class="info">
            <ul>
                <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>: å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°</li>
                <li><strong>å¼•ç”¨ç®¡ç†</strong>: é€šè¿‡Referenceè¿›è¡Œå†…å­˜ç®¡ç†</li>
                <li><strong>é€æ˜æ€§</strong>: å¯¹åº”ç”¨å±‚å®Œå…¨é€æ˜</li>
            </ul>
        </div>

        <h4>4. <span class="field-name">r_ahead_size</span> - é¢„è¯»å¤§å°</h4>
        <div class="info">
            <ul>
                <li><strong>å€¼ä¸º0</strong>: è¡¨ç¤ºç¦ç”¨é¢„è¯»åŠŸèƒ½</li>
                <li><strong>ä¼˜åŒ–ç­–ç•¥</strong>: é¡ºåºè¯»å–æ—¶å¯æé«˜æ€§èƒ½</li>
                <li><strong>å†…å­˜æ§åˆ¶</strong>: é¿å…ä¸å¿…è¦çš„å†…å­˜å ç”¨</li>
            </ul>
        </div>

        <h2>âš¡ æ€§èƒ½ä¸æ—¶é—´åˆ†æ</h2>

        <h3>ğŸ“Š æ“ä½œæ—¶é—´çº¿</h3>
        <table>
            <thead>
                <tr>
                    <th>æ—¶é—´æˆ³</th>
                    <th>æ“ä½œ</th>
                    <th>è€—æ—¶</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>795027Î¼s</td>
                    <td>å¼€å§‹å“ˆå¸Œè®¡ç®—</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>795073Î¼s</td>
                    <td>å“ˆå¸Œè®¡ç®—å®Œæˆ</td>
                    <td>46Î¼s</td>
                </tr>
                <tr>
                    <td>795190Î¼s</td>
                    <td>å¼€å§‹æ–‡ä»¶å†™å…¥</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>795273Î¼s</td>
                    <td>æ–‡ä»¶å†™å…¥å®Œæˆ</td>
                    <td>83Î¼s</td>
                </tr>
            </tbody>
        </table>

        <div class="success">
            <strong>æ€§èƒ½æ•°æ®</strong>: 
            <ul>
                <li>å“ˆå¸Œè®¡ç®—: 46Î¼s</li>
                <li>ç£ç›˜å†™å…¥: 83Î¼s</li>
                <li>æ€»è€—æ—¶: 246Î¼s</li>
            </ul>
        </div>

        <h2>ğŸ¯ å…³é”®ç»“è®º</h2>

        <div class="warning">
            <h4>âš ï¸ é‡è¦ç†è§£</h4>
            <ul>
                <li><strong>æ–‡ä»¶æè¿°ç¬¦ç»“æ„</strong>: ä»…ç”¨äºErlangè¿è¡Œæ—¶çš„æ–‡ä»¶æ“ä½œç®¡ç†</li>
                <li><strong>ä¸å†™å…¥æ–‡ä»¶</strong>: æ‰€æœ‰æè¿°ç¬¦å­—æ®µéƒ½æ˜¯å†…å­˜ä¸­çš„ç®¡ç†ä¿¡æ¯</li>
                <li><strong>å®é™…å†™å…¥</strong>: åªæœ‰ä¸šåŠ¡æ•°æ®çš„äºŒè¿›åˆ¶åºåˆ—åŒ–ç»“æœå†™å…¥ç£ç›˜</li>
                <li><strong>é€æ˜æ“ä½œ</strong>: åº”ç”¨å±‚æ— éœ€å…³å¿ƒæè¿°ç¬¦çš„å†…éƒ¨ç»“æ„</li>
            </ul>
        </div>

        <h3>ğŸ” æ ¸å¿ƒå†™å…¥å‡½æ•°</h3>
        <div class="code-block">
write_data(File, Data) ->
  file:write(File, Data).
        </div>

        <div class="info">
            <p><strong>å‡½æ•°è¯´æ˜</strong>:</p>
            <ul>
                <li><span class="field-name">File</span>: æ–‡ä»¶æè¿°ç¬¦(ç®¡ç†ä¿¡æ¯ï¼Œä¸å†™å…¥)</li>
                <li><span class="field-name">Data</span>: äºŒè¿›åˆ¶æ•°æ®(å®é™…å†™å…¥å†…å®¹)</li>
                <li><strong>è¿”å›å€¼</strong>: ok | {error, Reason}</li>
            </ul>
        </div>

        <h2>ğŸ“ æ€»ç»“</h2>

        <p>é€šè¿‡å¯¹traceæ—¥å¿—çš„è¯¦ç»†åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤ï¼š</p>

        <ol>
            <li><strong>æ–‡ä»¶æè¿°ç¬¦ç»“æ„</strong>æ˜¯Erlangè¿è¡Œæ—¶ç”¨äºç®¡ç†æ–‡ä»¶I/Oçš„å†…éƒ¨æ•°æ®ç»“æ„</li>
            <li><strong>æ‰€æœ‰æè¿°ç¬¦å­—æ®µ</strong>(handle, owner, r_buffer, r_ahead_size)éƒ½ä¸ä¼šå†™å…¥åˆ°å®é™…æ–‡ä»¶ä¸­</li>
            <li><strong>å®é™…å†™å…¥æ–‡ä»¶çš„æ•°æ®</strong>åªæœ‰ç»è¿‡åºåˆ—åŒ–å’Œå“ˆå¸Œå¤„ç†çš„ä¸šåŠ¡æ•°æ®</li>
            <li><strong>CRAQç³»ç»Ÿ</strong>é€šè¿‡è¿™ç§è®¾è®¡å®ç°äº†é«˜æ•ˆçš„æ–‡ä»¶I/Oç®¡ç†å’Œæ•°æ®å®Œæ•´æ€§ä¿è¯</li>
        </ol>

        <div class="success">
            è¿™ç§è®¾è®¡ä½“ç°äº†Erlangç³»ç»Ÿä¼˜ç§€çš„æŠ½è±¡èƒ½åŠ›ï¼šå°†å¤æ‚çš„æ–‡ä»¶ç®¡ç†ç»†èŠ‚å°è£…åœ¨åº•å±‚ï¼Œä¸ºä¸Šå±‚åº”ç”¨æä¾›ç®€æ´ã€é«˜æ•ˆçš„æ¥å£ã€‚
        </div>
    </div>

<!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="back-to-top" style="
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #00d4ff, #7c3aed);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0, 212, 255, 0.3);
    transition: all 0.3s ease;
    z-index: 999;
    opacity: 0;
    transform: translateY(20px);
" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" 
   onmouseover="this.style.transform='translateY(-5px) scale(1.1)'" 
   onmouseout="this.style.transform='translateY(0) scale(1)'">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
        <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
    </svg>
</div>

<script>
// å›åˆ°é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤º/éšè—é€»è¾‘
window.addEventListener('scroll', function() {
    const backToTop = document.getElementById('back-to-top');
    if (window.scrollY > 300) {
        backToTop.style.opacity = '1';
        backToTop.style.transform = 'translateY(0)';
    } else {
        backToTop.style.opacity = '0';
        backToTop.style.transform = 'translateY(20px)';
    }
});
</script>

</body>
</html>